{"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\app.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\app.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":29},"end":{"line":7,"column":88}},"5":{"start":{"line":8,"column":24},"end":{"line":8,"column":74}},"6":{"start":{"line":9,"column":22},"end":{"line":9,"column":70}},"7":{"start":{"line":10,"column":26},"end":{"line":10,"column":78}},"8":{"start":{"line":11,"column":27},"end":{"line":11,"column":80}},"9":{"start":{"line":12,"column":27},"end":{"line":12,"column":80}},"10":{"start":{"line":13,"column":24},"end":{"line":13,"column":90}},"11":{"start":{"line":14,"column":25},"end":{"line":14,"column":80}},"12":{"start":{"line":15,"column":20},"end":{"line":15,"column":59}},"13":{"start":{"line":16,"column":12},"end":{"line":16,"column":36}},"14":{"start":{"line":17,"column":26},"end":{"line":17,"column":45}},"15":{"start":{"line":18,"column":0},"end":{"line":18,"column":34}},"16":{"start":{"line":19,"column":0},"end":{"line":19,"column":38}},"17":{"start":{"line":21,"column":0},"end":{"line":21,"column":60}},"18":{"start":{"line":22,"column":0},"end":{"line":22,"column":54}},"19":{"start":{"line":23,"column":0},"end":{"line":23,"column":45}},"20":{"start":{"line":24,"column":0},"end":{"line":24,"column":51}},"21":{"start":{"line":25,"column":0},"end":{"line":25,"column":59}},"22":{"start":{"line":26,"column":0},"end":{"line":26,"column":62}},"23":{"start":{"line":27,"column":0},"end":{"line":27,"column":62}},"24":{"start":{"line":28,"column":0},"end":{"line":28,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":10,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1},"f":{"0":10},"b":{"0":[1,1,1],"1":[9,1],"2":[10,10]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/app.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/app.ts"],"names":[],"mappings":";;;;;AAAA,sDAA2C;AAC3C,yFAAqD;AACrD,2EAAmD;AACnD,uEAA+C;AAC/C,+EAAuD;AACvD,iFAA0D;AAC1D,iFAAyD;AACzD,2FAAoE;AACpE,iFAAyD;AACzD,4DAAiC;AAEjC,MAAM,GAAG,GAAY,IAAA,iBAAO,GAAE,CAAC;AAC/B,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,mBAAM,CAAC;AAEjC,GAAG,CAAC,GAAG,CAAC,iBAAO,CAAC,IAAI,EAAE,CAAC,CAAC;AACxB,GAAG,CAAC,GAAG,CAAC,4BAAM,CAAC,CAAC;AAEhB,2DAA2D;AAC3D,GAAG,CAAC,IAAI,CAAC,GAAG,OAAO,QAAQ,EAAE,uBAAc,CAAC,KAAK,CAAC,CAAC,CAAC,8EAA8E;AAClI,GAAG,CAAC,GAAG,CAAC,GAAG,OAAO,SAAS,EAAE,uBAAa,CAAC,CAAC;AAC5C,GAAG,CAAC,GAAG,CAAC,wBAAc,CAAC,UAAU,CAAC,CAAC,CAAC,8EAA8E;AAClH,GAAG,CAAC,GAAG,CAAC,GAAG,OAAO,QAAQ,EAAE,qBAAW,CAAC,CAAC;AACzC,GAAG,CAAC,GAAG,CAAC,GAAG,OAAO,YAAY,EAAE,yBAAe,CAAC,CAAC;AACjD,GAAG,CAAC,GAAG,CAAC,GAAG,OAAO,cAAc,EAAE,0BAAiB,CAAC,CAAC;AACrD,GAAG,CAAC,GAAG,CAAC,GAAG,OAAO,cAAc,EAAE,0BAAgB,CAAC,CAAC;AAEpD,kBAAe,GAAG,CAAC","sourcesContent":["import express, { Express } from \"express\";\r\nimport logger from './middleware/generalMiddlewares';\r\nimport generalRoutes from \"./routes/generalRoutes\";\r\nimport usersRoutes from \"./routes/usersRoutes\";\r\nimport addressesRoutes from \"./routes/addressesRoutes\";\r\nimport waterMetersRoutes from \"./routes/waterMeterRoutes\";\r\nimport waterUsageRoutes from \"./routes/waterUsageRoutes\";\r\nimport authController from \"./components/controllers/authContoller\";\r\nimport authMiddleware from \"./middleware/authMiddleWare\";\r\nimport config from './apiConfig';\r\n\r\nconst app: Express = express();\r\nconst { port, apiPath } = config;\r\n\r\napp.use(express.json());\r\napp.use(logger);\r\n\r\n//app.post(`${apiPath}/register`, authController.register);\r\napp.post(`${apiPath}/login`, authController.login); //TODO: v채lja kommenteeritud, et frondis ilma autentimiseta andmed k채tte saaks\r\napp.use(`${apiPath}/health`, generalRoutes);\r\napp.use(authMiddleware.isLoggedIn); //TODO: v채lja kommenteeritud, et frondis ilma autentimiseta andmed k채tte saaks\r\napp.use(`${apiPath}/users`, usersRoutes);\r\napp.use(`${apiPath}/addresses`, addressesRoutes);\r\napp.use(`${apiPath}/water-meter`, waterMetersRoutes);\r\napp.use(`${apiPath}/water-usage`, waterUsageRoutes);\r\n\r\nexport default app;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"76127ccd28a868d8431f4f43e67be4c5a64052ec","contentHash":"7c847ec37b670a215b30092bd713d58fc53c0dd950a896e3995d844c391b6542"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\middleware\\generalMiddlewares.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\middleware\\generalMiddlewares.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":15},"end":{"line":6,"column":1}},"2":{"start":{"line":4,"column":4},"end":{"line":4,"column":72}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":11}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":15},"end":{"line":3,"column":16}},"loc":{"start":{"line":3,"column":35},"end":{"line":6,"column":1}},"line":3}},"branchMap":{},"s":{"0":1,"1":1,"2":5,"3":5,"4":1},"f":{"0":5},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/middleware/generalMiddlewares.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/middleware/generalMiddlewares.ts"],"names":[],"mappings":";;AAEA,MAAM,MAAM,GAAG,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IAC/D,OAAO,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,GAAG,IAAI,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;IACpE,IAAI,EAAE,CAAC;AACX,CAAC,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["import { Request, Response, NextFunction } from 'express';\r\n\r\nconst logger = (req: Request, res: Response, next: NextFunction) => {\r\n    console.log(`${req.method} ${req.url} ${new Date().toISOString()}`);\r\n    next();\r\n};\r\n\r\nexport default logger;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c062d942040fa94416e609d88d5b0cbca5ff139d","contentHash":"e5291617ab71fae65be06345ede4aba75f9e9e41577467cd322d65e1bc8d18bd"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\routes\\generalRoutes.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\routes\\generalRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":29},"end":{"line":7,"column":101}},"5":{"start":{"line":8,"column":22},"end":{"line":8,"column":48}},"6":{"start":{"line":9,"column":0},"end":{"line":10,"column":51}},"7":{"start":{"line":11,"column":0},"end":{"line":11,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{"0":2},"b":{"0":[1,1,1],"1":[1,1],"2":[2,2]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/routes/generalRoutes.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/routes/generalRoutes.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,sGAA6E;AAC7E,MAAM,aAAa,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEvC,aAAa;KACR,GAAG,CAAC,GAAG,EAAE,4BAAiB,CAAC,MAAM,CAAC,CAAC;AAExC,kBAAe,aAAa,CAAC","sourcesContent":["import express from 'express';\r\nimport generalController from '../components/controllers/generalControllers';\r\nconst generalRoutes = express.Router();\r\n\r\ngeneralRoutes\r\n    .get('/', generalController.health);\r\n\r\nexport default generalRoutes;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1ed507057a525522e4a16d43cf4edee71137b26a","contentHash":"965ee7af821a56d7fa0b3e5d8b30216e7e572d36ae25b02ea46c0738afe03fce"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\controllers\\generalControllers.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\controllers\\generalControllers.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":26},"end":{"line":9,"column":1}},"2":{"start":{"line":5,"column":8},"end":{"line":7,"column":11}},"3":{"start":{"line":10,"column":0},"end":{"line":10,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":12},"end":{"line":4,"column":13}},"loc":{"start":{"line":4,"column":26},"end":{"line":8,"column":5}},"line":4}},"branchMap":{},"s":{"0":1,"1":1,"2":0,"3":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/controllers/generalControllers.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/controllers/generalControllers.ts"],"names":[],"mappings":";;AAEA,MAAM,iBAAiB,GAAG;IACtB,MAAM,EAAE,CAAC,GAAY,EAAE,GAAa,EAAE,EAAE;QACpC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACjB,OAAO,EAAE,cAAc;SAC1B,CAAC,CAAC;IACP,CAAC;CACJ,CAAC;AAEF,kBAAe,iBAAiB,CAAC","sourcesContent":["import { Request, Response } from 'express';\r\n\r\nconst generalController = {\r\n    health: (req: Request, res: Response) => {\r\n        res.status(200).json({\r\n            message: 'Hello world!',\r\n        });\r\n    }\r\n};\r\n\r\nexport default generalController;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fd02ef6fdd82f8e86d91892680180786f7fc27f0","contentHash":"c7a468bc0034b2da4c11bef29a95333d3d2889947526780522483da1c0317d06"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\routes\\usersRoutes.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\routes\\usersRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":26},"end":{"line":7,"column":95}},"5":{"start":{"line":8,"column":27},"end":{"line":8,"column":85}},"6":{"start":{"line":9,"column":20},"end":{"line":9,"column":46}},"7":{"start":{"line":10,"column":0},"end":{"line":15,"column":62}},"8":{"start":{"line":16,"column":0},"end":{"line":16,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{"0":3},"b":{"0":[1,1,1],"1":[2,1],"2":[3,3]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/routes/usersRoutes.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/routes/usersRoutes.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,gGAAyE;AAEzE,sFAA8D;AAE9D,MAAM,WAAW,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAErC,WAAW;KACN,GAAG,CAAC,GAAG,EAAE,yBAAgB,CAAC,WAAW,CAAC;KACtC,GAAG,CAAC,MAAM,EAAE,yBAAgB,CAAC,WAAW,CAAC;KACzC,IAAI,CAAC,GAAG,EAAE,0BAAgB,CAAC,mBAAmB,EAAE,yBAAgB,CAAC,aAAa,CAAC;KAC/E,KAAK,CAAC,MAAM,EAAE,yBAAgB,CAAC,UAAU,CAAC;KAC1C,MAAM,CAAC,MAAM,EAAE,yBAAgB,CAAC,cAAc,CAAC,CAAC;AAErD,kBAAe,WAAW,CAAC","sourcesContent":["import express from \"express\";\r\nimport usersControllers from \"../components/controllers/usersController\";\r\nimport authMiddleware from \"../middleware/authMiddleWare\";\r\nimport usersMiddlewares from \"../middleware/usersMiddlewares\";\r\n\r\nconst usersRoutes = express.Router();\r\n\r\nusersRoutes\r\n    .get(\"/\", usersControllers.getAllUsers)\r\n    .get(\"/:id\", usersControllers.getUserById)\r\n    .post(\"/\", usersMiddlewares.checkCreateUserData, usersControllers.createNewUser)\r\n    .patch(\"/:id\", usersControllers.updateUser)\r\n    .delete(\"/:id\", usersControllers.deleteUserById);\r\n\r\nexport default usersRoutes;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"df4323bcef38f0b72104808631d96ba41bb353c3","contentHash":"0e450cb0bd42bbd835a1334758b6158276216720e4bbdd314c3c588eddefcdc5"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\controllers\\usersController.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\controllers\\usersController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":23},"end":{"line":15,"column":75}},"16":{"start":{"line":16,"column":20},"end":{"line":36,"column":2}},"17":{"start":{"line":16,"column":40},"end":{"line":36,"column":2}},"18":{"start":{"line":17,"column":4},"end":{"line":35,"column":5}},"19":{"start":{"line":19,"column":8},"end":{"line":19,"column":46}},"20":{"start":{"line":20,"column":8},"end":{"line":26,"column":9}},"21":{"start":{"line":21,"column":12},"end":{"line":21,"column":63}},"22":{"start":{"line":24,"column":27},"end":{"line":24,"column":42}},"23":{"start":{"line":25,"column":12},"end":{"line":25,"column":59}},"24":{"start":{"line":27,"column":8},"end":{"line":31,"column":11}},"25":{"start":{"line":34,"column":8},"end":{"line":34,"column":20}},"26":{"start":{"line":37,"column":20},"end":{"line":54,"column":2}},"27":{"start":{"line":37,"column":40},"end":{"line":54,"column":2}},"28":{"start":{"line":38,"column":4},"end":{"line":53,"column":5}},"29":{"start":{"line":39,"column":19},"end":{"line":39,"column":46}},"30":{"start":{"line":40,"column":21},"end":{"line":40,"column":65}},"31":{"start":{"line":41,"column":8},"end":{"line":42,"column":46}},"32":{"start":{"line":42,"column":12},"end":{"line":42,"column":46}},"33":{"start":{"line":43,"column":8},"end":{"line":49,"column":11}},"34":{"start":{"line":52,"column":8},"end":{"line":52,"column":20}},"35":{"start":{"line":55,"column":19},"end":{"line":82,"column":2}},"36":{"start":{"line":55,"column":39},"end":{"line":82,"column":2}},"37":{"start":{"line":56,"column":4},"end":{"line":81,"column":5}},"38":{"start":{"line":57,"column":19},"end":{"line":57,"column":46}},"39":{"start":{"line":58,"column":58},"end":{"line":58,"column":66}},"40":{"start":{"line":59,"column":21},"end":{"line":59,"column":65}},"41":{"start":{"line":60,"column":8},"end":{"line":61,"column":46}},"42":{"start":{"line":61,"column":12},"end":{"line":61,"column":46}},"43":{"start":{"line":62,"column":8},"end":{"line":63,"column":49}},"44":{"start":{"line":63,"column":12},"end":{"line":63,"column":49}},"45":{"start":{"line":64,"column":29},"end":{"line":70,"column":9}},"46":{"start":{"line":71,"column":23},"end":{"line":71,"column":70}},"47":{"start":{"line":72,"column":8},"end":{"line":73,"column":64}},"48":{"start":{"line":73,"column":12},"end":{"line":73,"column":64}},"49":{"start":{"line":74,"column":8},"end":{"line":77,"column":11}},"50":{"start":{"line":80,"column":8},"end":{"line":80,"column":20}},"51":{"start":{"line":83,"column":22},"end":{"line":104,"column":2}},"52":{"start":{"line":83,"column":42},"end":{"line":104,"column":2}},"53":{"start":{"line":84,"column":4},"end":{"line":103,"column":5}},"54":{"start":{"line":85,"column":69},"end":{"line":85,"column":77}},"55":{"start":{"line":86,"column":24},"end":{"line":92,"column":9}},"56":{"start":{"line":93,"column":19},"end":{"line":93,"column":67}},"57":{"start":{"line":94,"column":8},"end":{"line":95,"column":64}},"58":{"start":{"line":95,"column":12},"end":{"line":95,"column":64}},"59":{"start":{"line":96,"column":8},"end":{"line":99,"column":11}},"60":{"start":{"line":102,"column":8},"end":{"line":102,"column":20}},"61":{"start":{"line":105,"column":23},"end":{"line":122,"column":2}},"62":{"start":{"line":105,"column":43},"end":{"line":122,"column":2}},"63":{"start":{"line":106,"column":4},"end":{"line":121,"column":5}},"64":{"start":{"line":107,"column":19},"end":{"line":107,"column":46}},"65":{"start":{"line":108,"column":21},"end":{"line":108,"column":65}},"66":{"start":{"line":109,"column":8},"end":{"line":110,"column":46}},"67":{"start":{"line":110,"column":12},"end":{"line":110,"column":46}},"68":{"start":{"line":111,"column":23},"end":{"line":111,"column":66}},"69":{"start":{"line":112,"column":8},"end":{"line":113,"column":64}},"70":{"start":{"line":113,"column":12},"end":{"line":113,"column":64}},"71":{"start":{"line":114,"column":8},"end":{"line":117,"column":11}},"72":{"start":{"line":120,"column":8},"end":{"line":120,"column":20}},"73":{"start":{"line":123,"column":25},"end":{"line":129,"column":1}},"74":{"start":{"line":130,"column":0},"end":{"line":130,"column":35}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":16,"column":20},"end":{"line":16,"column":21}},"loc":{"start":{"line":16,"column":40},"end":{"line":36,"column":2}},"line":16},"9":{"name":"(anonymous_9)","decl":{"start":{"line":16,"column":74},"end":{"line":16,"column":75}},"loc":{"start":{"line":16,"column":87},"end":{"line":36,"column":1}},"line":16},"10":{"name":"(anonymous_10)","decl":{"start":{"line":37,"column":20},"end":{"line":37,"column":21}},"loc":{"start":{"line":37,"column":40},"end":{"line":54,"column":2}},"line":37},"11":{"name":"(anonymous_11)","decl":{"start":{"line":37,"column":74},"end":{"line":37,"column":75}},"loc":{"start":{"line":37,"column":87},"end":{"line":54,"column":1}},"line":37},"12":{"name":"(anonymous_12)","decl":{"start":{"line":55,"column":19},"end":{"line":55,"column":20}},"loc":{"start":{"line":55,"column":39},"end":{"line":82,"column":2}},"line":55},"13":{"name":"(anonymous_13)","decl":{"start":{"line":55,"column":73},"end":{"line":55,"column":74}},"loc":{"start":{"line":55,"column":86},"end":{"line":82,"column":1}},"line":55},"14":{"name":"(anonymous_14)","decl":{"start":{"line":83,"column":22},"end":{"line":83,"column":23}},"loc":{"start":{"line":83,"column":42},"end":{"line":104,"column":2}},"line":83},"15":{"name":"(anonymous_15)","decl":{"start":{"line":83,"column":76},"end":{"line":83,"column":77}},"loc":{"start":{"line":83,"column":89},"end":{"line":104,"column":1}},"line":83},"16":{"name":"(anonymous_16)","decl":{"start":{"line":105,"column":23},"end":{"line":105,"column":24}},"loc":{"start":{"line":105,"column":43},"end":{"line":122,"column":2}},"line":105},"17":{"name":"(anonymous_17)","decl":{"start":{"line":105,"column":77},"end":{"line":105,"column":78}},"loc":{"start":{"line":105,"column":90},"end":{"line":122,"column":1}},"line":105}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":20,"column":8},"end":{"line":26,"column":9}},"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":26,"column":9}},{"start":{"line":20,"column":8},"end":{"line":26,"column":9}}],"line":20},"9":{"loc":{"start":{"line":41,"column":8},"end":{"line":42,"column":46}},"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":42,"column":46}},{"start":{"line":41,"column":8},"end":{"line":42,"column":46}}],"line":41},"10":{"loc":{"start":{"line":60,"column":8},"end":{"line":61,"column":46}},"type":"if","locations":[{"start":{"line":60,"column":8},"end":{"line":61,"column":46}},{"start":{"line":60,"column":8},"end":{"line":61,"column":46}}],"line":60},"11":{"loc":{"start":{"line":62,"column":8},"end":{"line":63,"column":49}},"type":"if","locations":[{"start":{"line":62,"column":8},"end":{"line":63,"column":49}},{"start":{"line":62,"column":8},"end":{"line":63,"column":49}}],"line":62},"12":{"loc":{"start":{"line":62,"column":12},"end":{"line":62,"column":58}},"type":"binary-expr","locations":[{"start":{"line":62,"column":12},"end":{"line":62,"column":22}},{"start":{"line":62,"column":26},"end":{"line":62,"column":35}},{"start":{"line":62,"column":39},"end":{"line":62,"column":45}},{"start":{"line":62,"column":49},"end":{"line":62,"column":58}}],"line":62},"13":{"loc":{"start":{"line":72,"column":8},"end":{"line":73,"column":64}},"type":"if","locations":[{"start":{"line":72,"column":8},"end":{"line":73,"column":64}},{"start":{"line":72,"column":8},"end":{"line":73,"column":64}}],"line":72},"14":{"loc":{"start":{"line":94,"column":8},"end":{"line":95,"column":64}},"type":"if","locations":[{"start":{"line":94,"column":8},"end":{"line":95,"column":64}},{"start":{"line":94,"column":8},"end":{"line":95,"column":64}}],"line":94},"15":{"loc":{"start":{"line":109,"column":8},"end":{"line":110,"column":46}},"type":"if","locations":[{"start":{"line":109,"column":8},"end":{"line":110,"column":46}},{"start":{"line":109,"column":8},"end":{"line":110,"column":46}}],"line":109},"16":{"loc":{"start":{"line":112,"column":8},"end":{"line":113,"column":64}},"type":"if","locations":[{"start":{"line":112,"column":8},"end":{"line":113,"column":64}},{"start":{"line":112,"column":8},"end":{"line":113,"column":64}}],"line":112}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":1,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":1,"74":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0,0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/controllers/usersController.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/controllers/usersController.ts"],"names":[],"mappings":"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","sourcesContent":["import { NextFunction, Request, Response } from 'express';\r\nimport { IUser } from \"../interfaces/usersInterfaces\";\r\nimport userServices from '../services/userServices';\r\n\r\n\r\nconst getAllUsers = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n      let users;\r\n      console.log(\"res: \", res.locals.user)\r\n        if (res.locals.user.userRoleID === 1) {\r\n          users = await userServices.getAllUsers();\r\n        } else {\r\n          const { id } = res.locals.user;\r\n          users = userServices.getUserById(id);\r\n        }\r\n  \r\n        return res.status(200).json({\r\n          success: true,\r\n          message: 'List of users',\r\n          users,\r\n        });\r\n      } catch (error) {\r\n        next(error);\r\n      }\r\n    }\r\n\r\nconst getUserById =async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n        const id = parseInt(req.params.id, 10);\r\n        const user = await userServices.getUserById(id);\r\n        if (!user) throw new Error('User not found');\r\n        return res.status(200).json({\r\n          success: true,\r\n          message: 'User',\r\n          data: {\r\n            user,\r\n          },\r\n        });\r\n      } catch (error) {\r\n        next(error);\r\n      }\r\n};\r\n\r\nconst updateUser = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n        const id = parseInt(req.params.id, 10);\r\n      const {\r\n        firstName, lastName, email, password,\r\n      } = req.body;\r\n  \r\n      const user = await userServices.getUserById(id);\r\n      if (!user) throw new Error('User not found');\r\n      if (!firstName && !lastName && !email && !password) throw new Error('Nothing to change');\r\n  \r\n      const userToUpdate: IUser = {\r\n        id,\r\n        firstName,\r\n        lastName,\r\n        email,\r\n        password,\r\n      };\r\n  \r\n      const result = userServices.updateUser(userToUpdate);\r\n      if (!result) throw new Error('Error, did manage to update user');\r\n      return res.status(200).json({\r\n        success: true,\r\n        message: 'User updated',\r\n      });\r\n      } catch (error) {\r\n        next(error);\r\n      }\r\n};\r\n\r\nconst createNewUser = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n        const {\r\n          firstName, lastName, email, password, userRoleID\r\n        } = req.body;\r\n        const newUser: IUser = {\r\n          firstName,\r\n          lastName,\r\n          email,\r\n          password,\r\n          userRoleID: 3,\r\n        };\r\n        const id = await userServices.createUser(newUser);\r\n        if (!id) throw new Error('Error, did manage to create user');\r\n        return res.status(201).json({\r\n          success: true,\r\n          message: `User with id ${id} created`,\r\n        });\r\n      } catch (error) {\r\n        next(error);\r\n      }\r\n};\r\n\r\nconst deleteUserById = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n        const id = parseInt(req.params.id, 10);\r\n        const user = await userServices.getUserById(id);\r\n        if (!user) throw new Error('User not found');\r\n        const result = await userServices.deleteUser(id);\r\n        if (!result) throw new Error('Error, did manage to delete user');\r\n        return res.status(200).json({\r\n          success: true,\r\n          message: 'User deleted',\r\n        });\r\n      } catch (error) {\r\n        next(error);\r\n      }\r\n};\r\n\r\nconst usersControllers = {\r\n    getAllUsers,\r\n    getUserById,\r\n    updateUser,\r\n    createNewUser,\r\n    deleteUserById,\r\n}\r\n\r\n\r\nexport default usersControllers;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"14de87b2cd469864c62ba63902d9ecd518676aab","contentHash":"a020fd864db07cc8ec0913edf8d9ae2d9f39097919f3401abca1c86db40f290a"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\services\\userServices.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\services\\userServices.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":61}},"16":{"start":{"line":16,"column":23},"end":{"line":16,"column":65}},"17":{"start":{"line":17,"column":20},"end":{"line":20,"column":2}},"18":{"start":{"line":17,"column":28},"end":{"line":20,"column":2}},"19":{"start":{"line":18,"column":19},"end":{"line":18,"column":176}},"20":{"start":{"line":19,"column":4},"end":{"line":19,"column":19}},"21":{"start":{"line":21,"column":23},"end":{"line":24,"column":2}},"22":{"start":{"line":21,"column":34},"end":{"line":24,"column":2}},"23":{"start":{"line":22,"column":19},"end":{"line":22,"column":144}},"24":{"start":{"line":23,"column":4},"end":{"line":23,"column":19}},"25":{"start":{"line":25,"column":20},"end":{"line":28,"column":2}},"26":{"start":{"line":25,"column":26},"end":{"line":28,"column":2}},"27":{"start":{"line":26,"column":16},"end":{"line":26,"column":69}},"28":{"start":{"line":27,"column":4},"end":{"line":27,"column":13}},"29":{"start":{"line":29,"column":19},"end":{"line":42,"column":2}},"30":{"start":{"line":29,"column":29},"end":{"line":42,"column":2}},"31":{"start":{"line":30,"column":27},"end":{"line":30,"column":75}},"32":{"start":{"line":31,"column":20},"end":{"line":38,"column":5}},"33":{"start":{"line":39,"column":21},"end":{"line":39,"column":90}},"34":{"start":{"line":41,"column":4},"end":{"line":41,"column":27}},"35":{"start":{"line":43,"column":19},"end":{"line":61,"column":2}},"36":{"start":{"line":43,"column":37},"end":{"line":61,"column":2}},"37":{"start":{"line":44,"column":73},"end":{"line":44,"column":85}},"38":{"start":{"line":45,"column":17},"end":{"line":45,"column":51}},"39":{"start":{"line":46,"column":25},"end":{"line":46,"column":29}},"40":{"start":{"line":47,"column":4},"end":{"line":49,"column":5}},"41":{"start":{"line":48,"column":8},"end":{"line":48,"column":69}},"42":{"start":{"line":50,"column":19},"end":{"line":55,"column":5}},"43":{"start":{"line":56,"column":21},"end":{"line":56,"column":99}},"44":{"start":{"line":57,"column":4},"end":{"line":59,"column":5}},"45":{"start":{"line":58,"column":8},"end":{"line":58,"column":21}},"46":{"start":{"line":60,"column":4},"end":{"line":60,"column":16}},"47":{"start":{"line":62,"column":19},"end":{"line":68,"column":2}},"48":{"start":{"line":62,"column":27},"end":{"line":68,"column":2}},"49":{"start":{"line":63,"column":21},"end":{"line":63,"column":115}},"50":{"start":{"line":64,"column":4},"end":{"line":66,"column":5}},"51":{"start":{"line":65,"column":8},"end":{"line":65,"column":21}},"52":{"start":{"line":67,"column":4},"end":{"line":67,"column":16}},"53":{"start":{"line":72,"column":21},"end":{"line":79,"column":1}},"54":{"start":{"line":80,"column":0},"end":{"line":80,"column":31}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":20},"end":{"line":17,"column":21}},"loc":{"start":{"line":17,"column":28},"end":{"line":20,"column":2}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":62},"end":{"line":17,"column":63}},"loc":{"start":{"line":17,"column":75},"end":{"line":20,"column":1}},"line":17},"10":{"name":"(anonymous_10)","decl":{"start":{"line":21,"column":23},"end":{"line":21,"column":24}},"loc":{"start":{"line":21,"column":34},"end":{"line":24,"column":2}},"line":21},"11":{"name":"(anonymous_11)","decl":{"start":{"line":21,"column":68},"end":{"line":21,"column":69}},"loc":{"start":{"line":21,"column":81},"end":{"line":24,"column":1}},"line":21},"12":{"name":"(anonymous_12)","decl":{"start":{"line":25,"column":20},"end":{"line":25,"column":21}},"loc":{"start":{"line":25,"column":26},"end":{"line":28,"column":2}},"line":25},"13":{"name":"(anonymous_13)","decl":{"start":{"line":25,"column":60},"end":{"line":25,"column":61}},"loc":{"start":{"line":25,"column":73},"end":{"line":28,"column":1}},"line":25},"14":{"name":"(anonymous_14)","decl":{"start":{"line":29,"column":19},"end":{"line":29,"column":20}},"loc":{"start":{"line":29,"column":29},"end":{"line":42,"column":2}},"line":29},"15":{"name":"(anonymous_15)","decl":{"start":{"line":29,"column":63},"end":{"line":29,"column":64}},"loc":{"start":{"line":29,"column":76},"end":{"line":42,"column":1}},"line":29},"16":{"name":"(anonymous_16)","decl":{"start":{"line":43,"column":19},"end":{"line":43,"column":20}},"loc":{"start":{"line":43,"column":37},"end":{"line":61,"column":2}},"line":43},"17":{"name":"(anonymous_17)","decl":{"start":{"line":43,"column":71},"end":{"line":43,"column":72}},"loc":{"start":{"line":43,"column":84},"end":{"line":61,"column":1}},"line":43},"18":{"name":"(anonymous_18)","decl":{"start":{"line":62,"column":19},"end":{"line":62,"column":20}},"loc":{"start":{"line":62,"column":27},"end":{"line":68,"column":2}},"line":62},"19":{"name":"(anonymous_19)","decl":{"start":{"line":62,"column":61},"end":{"line":62,"column":62}},"loc":{"start":{"line":62,"column":74},"end":{"line":68,"column":1}},"line":62}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":47,"column":4},"end":{"line":49,"column":5}},"type":"if","locations":[{"start":{"line":47,"column":4},"end":{"line":49,"column":5}},{"start":{"line":47,"column":4},"end":{"line":49,"column":5}}],"line":47},"9":{"loc":{"start":{"line":51,"column":19},"end":{"line":51,"column":46}},"type":"binary-expr","locations":[{"start":{"line":51,"column":19},"end":{"line":51,"column":28}},{"start":{"line":51,"column":32},"end":{"line":51,"column":46}}],"line":51},"10":{"loc":{"start":{"line":52,"column":18},"end":{"line":52,"column":43}},"type":"binary-expr","locations":[{"start":{"line":52,"column":18},"end":{"line":52,"column":26}},{"start":{"line":52,"column":30},"end":{"line":52,"column":43}}],"line":52},"11":{"loc":{"start":{"line":53,"column":15},"end":{"line":53,"column":34}},"type":"binary-expr","locations":[{"start":{"line":53,"column":15},"end":{"line":53,"column":20}},{"start":{"line":53,"column":24},"end":{"line":53,"column":34}}],"line":53},"12":{"loc":{"start":{"line":54,"column":18},"end":{"line":54,"column":49}},"type":"binary-expr","locations":[{"start":{"line":54,"column":18},"end":{"line":54,"column":32}},{"start":{"line":54,"column":36},"end":{"line":54,"column":49}}],"line":54},"13":{"loc":{"start":{"line":57,"column":4},"end":{"line":59,"column":5}},"type":"if","locations":[{"start":{"line":57,"column":4},"end":{"line":59,"column":5}},{"start":{"line":57,"column":4},"end":{"line":59,"column":5}}],"line":57},"14":{"loc":{"start":{"line":64,"column":4},"end":{"line":66,"column":5}},"type":"if","locations":[{"start":{"line":64,"column":4},"end":{"line":66,"column":5}},{"start":{"line":64,"column":4},"end":{"line":66,"column":5}}],"line":64}},"s":{"0":1,"1":3,"2":0,"3":3,"4":0,"5":0,"6":0,"7":3,"8":3,"9":3,"10":3,"11":3,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":0,"19":0,"20":0,"21":1,"22":3,"23":3,"24":0,"25":1,"26":0,"27":0,"28":0,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":1,"48":0,"49":0,"50":0,"51":0,"52":0,"53":1,"54":1},"f":{"0":3,"1":3,"2":0,"3":3,"4":0,"5":3,"6":3,"7":2,"8":0,"9":0,"10":3,"11":3,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3],"3":[0,3],"4":[3,3],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/services/userServices.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/services/userServices.ts"],"names":[],"mappings":"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","sourcesContent":["import { FieldPacket, ResultSetHeader } from 'mysql2';\r\nimport pool from '../../database';\r\nimport {IUser, IUserSQL } from \"../interfaces/usersInterfaces\";\r\nimport authServices from './authServices';\r\n\r\nconst getUserById = async (id: number) => {\r\n    const [user]: [IUserSQL[], FieldPacket[]] = await pool.query(`SELECT id, firstName, lastName, personalNumber, email, creationTime, userRoleID, useraddressID FROM Users WHERE id=?;`, [id]);\r\n    return user[0];\r\n};\r\n\r\nconst getUserByEmail = async (email: string) => {\r\n    const [user]: [IUserSQL[], FieldPacket[]] = await pool.query(`SELECT id, email, password, role FROM users WHERE email=? AND deletedDate IS NULL;`, [email]);\r\n    return user[0];\r\n};\r\n\r\nconst getAllUsers = async () => {\r\n    const [u] = await pool.query('select * from Users');\r\n    return u;\r\n};\r\n    \r\nconst createUser = async (user: IUser): Promise<number | boolean> => {\r\n    const hashedPassword = await authServices.hash(user.password)\r\n    const newUser = {\r\n        firstName: user.firstName,\r\n        lastName: user.lastName,\r\n        email: user.email,\r\n        password: hashedPassword,\r\n        userRoleID: 3,\r\n        userAddressID: null\r\n    }\r\n\r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query(`INSERT INTO Users SET ?;`, [newUser]);\r\n    //return false;    \r\n    return result.insertId;\r\n}\r\n\r\n\r\nconst updateUser = async (userToUpdate: IUser): Promise<Boolean> => {\r\n    const { id, firstName, lastName, personalNumber, email, password } = userToUpdate;\r\n    const user = await userServices.getUserById(id!);\r\n    let hashedPassword = null;\r\n    if (password) { hashedPassword = await authServices.hash(password) }\r\n    \r\n    const update = {\r\n        firstName: firstName || user.firstName,\r\n        lastName: lastName || user.lastName,\r\n        email: email || user.email,\r\n        password: hashedPassword || user.password,\r\n    }\r\n\r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query(`UPDATE users SET ? WHERE id=?;`, [update, id]);\r\n    if (result.affectedRows < 1) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nconst deleteUser = async (id: number): Promise<Boolean> => {\r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query(`UPDATE Users SET deletedDate=? WHERE id=?;`, [new Date(), id]);\r\n    if (result.affectedRows < 1) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\n//TODO\r\n//updateUserRole\r\n//updateUserAddress\r\n\r\nconst userServices = {\r\n    getAllUsers,\r\n    getUserById,\r\n    getUserByEmail, \r\n    createUser,\r\n    updateUser,\r\n    deleteUser,    \r\n}\r\n\r\nexport default userServices;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a7cebe6202654d718c3b6c4a23af2f7b54904eba","contentHash":"c5f66fa7c4f2b74dadca0544c9e17e6783ce93bf9daaf5dba2760e65059decc6"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\database.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\database.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":17},"end":{"line":6,"column":51}},"4":{"start":{"line":8,"column":13},"end":{"line":18,"column":12}},"5":{"start":{"line":19,"column":17},"end":{"line":34,"column":1}},"6":{"start":{"line":20,"column":4},"end":{"line":33,"column":5}},"7":{"start":{"line":21,"column":8},"end":{"line":28,"column":11}},"8":{"start":{"line":22,"column":12},"end":{"line":26,"column":13}},"9":{"start":{"line":23,"column":16},"end":{"line":24,"column":35}},"10":{"start":{"line":24,"column":20},"end":{"line":24,"column":35}},"11":{"start":{"line":25,"column":16},"end":{"line":25,"column":23}},"12":{"start":{"line":27,"column":12},"end":{"line":27,"column":28}},"13":{"start":{"line":31,"column":8},"end":{"line":32,"column":27}},"14":{"start":{"line":32,"column":12},"end":{"line":32,"column":27}},"15":{"start":{"line":35,"column":0},"end":{"line":35,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":19,"column":17},"end":{"line":19,"column":18}},"loc":{"start":{"line":19,"column":45},"end":{"line":34,"column":1}},"line":19},"2":{"name":"(anonymous_2)","decl":{"start":{"line":21,"column":26},"end":{"line":21,"column":27}},"loc":{"start":{"line":21,"column":60},"end":{"line":28,"column":9}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":22,"column":12},"end":{"line":26,"column":13}},"type":"if","locations":[{"start":{"line":22,"column":12},"end":{"line":26,"column":13}},{"start":{"line":22,"column":12},"end":{"line":26,"column":13}}],"line":22},"4":{"loc":{"start":{"line":23,"column":16},"end":{"line":24,"column":35}},"type":"if","locations":[{"start":{"line":23,"column":16},"end":{"line":24,"column":35}},{"start":{"line":23,"column":16},"end":{"line":24,"column":35}}],"line":23},"5":{"loc":{"start":{"line":31,"column":8},"end":{"line":32,"column":27}},"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":32,"column":27}},{"start":{"line":31,"column":8},"end":{"line":32,"column":27}}],"line":31}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1},"f":{"0":1,"1":0,"2":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/database.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/database.ts"],"names":[],"mappings":";;;;;AAAA,oDAA2B;AAG3B,0EAA0E;AAC1E,MAAM,IAAI,GAAG,gBAAK,CAAC,UAAU,CAAC;IAC5B,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,UAAU;IAC5B,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,UAAU;IAC5B,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,cAAc;IACpC,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,cAAc;IACpC,IAAI,EAAE,IAAI;IACV,kBAAkB,EAAE,IAAI;IACxB,eAAe,EAAE,EAAE;IACnB,UAAU,EAAE,CAAC;IACb,kBAAkB,EAAE,IAAI;CACzB,CAAC,CAAC,OAAO,EAAE,CAAC;AAEb,MAAM,QAAQ,GAAG,CAAC,KAAU,EAAE,MAAW,EAAE,OAAW,EAAE,EAAE;IACxD,IAAI;QACF,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,UAAU,KAAU,EAAE,OAAW,EAAE,MAAW;YAC5D,IAAI,KAAK,EAAE;gBACP,IAAG,OAAO,KAAK,SAAS;oBACpB,OAAO,CAAC,KAAK,CAAC,CAAC;gBACnB,OAAO;aACV;YACD,MAAM,CAAC,OAAO,CAAC,CAAC;QACpB,CAAC,CAAC,CAAA;KACL;IACD,OAAO,KAAK,EAAE;QACV,IAAG,OAAO,KAAK,SAAS;YAAE,OAAO,CAAC,KAAK,CAAC,CAAA;KAC3C;AACD,CAAC,CAAA;AACD,kBAAe,IAAI,CAAC","sourcesContent":["import mysql from 'mysql2';\r\n\r\n\r\n// Create the connection pool. The pool-specific settings are the defaults\r\nconst pool = mysql.createPool({\r\n  host: process.env.MYSQL_HOST,\r\n  user: process.env.MYSQL_USER,\r\n  password: process.env.MYSQL_PASSWORD,\r\n  database: process.env.MYSQL_DATABASE,\r\n  port: 3306,\r\n  waitForConnections: true,\r\n  connectionLimit: 10,\r\n  queueLimit: 0,\r\n  multipleStatements: true,\r\n}).promise();\r\n\r\nconst querySql = (query: any, onData: any, onError:any) => {\r\n  try {\r\n    pool.query(query, function (error: any, results:any, fields: any) {\r\n        if (error) {\r\n            if(onError !== undefined)\r\n                onError(error);\r\n            return;\r\n        }\r\n        onData(results);\r\n    })\r\n}\r\ncatch (error) {\r\n    if(onError !== undefined) onError(error)\r\n}\r\n}\r\nexport default pool;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ec60384e966315b38a21ba7362753e7562b228d0","contentHash":"80e35144073b3b1cc83ac2ddaf0b971ac58947b8a331412bf24cc4776ca807d6"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\services\\authServices.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\services\\authServices.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":17},"end":{"line":15,"column":51}},"16":{"start":{"line":16,"column":23},"end":{"line":16,"column":63}},"17":{"start":{"line":17,"column":17},"end":{"line":17,"column":45}},"18":{"start":{"line":18,"column":18},"end":{"line":18,"column":62}},"19":{"start":{"line":19,"column":13},"end":{"line":29,"column":2}},"20":{"start":{"line":19,"column":27},"end":{"line":29,"column":2}},"21":{"start":{"line":20,"column":4},"end":{"line":25,"column":5}},"22":{"start":{"line":21,"column":8},"end":{"line":21,"column":55}},"23":{"start":{"line":24,"column":8},"end":{"line":24,"column":70}},"24":{"start":{"line":26,"column":17},"end":{"line":26,"column":66}},"25":{"start":{"line":27,"column":4},"end":{"line":27,"column":32}},"26":{"start":{"line":28,"column":4},"end":{"line":28,"column":16}},"27":{"start":{"line":30,"column":16},"end":{"line":33,"column":2}},"28":{"start":{"line":30,"column":36},"end":{"line":33,"column":2}},"29":{"start":{"line":31,"column":18},"end":{"line":31,"column":64}},"30":{"start":{"line":32,"column":4},"end":{"line":32,"column":17}},"31":{"start":{"line":34,"column":13},"end":{"line":42,"column":2}},"32":{"start":{"line":34,"column":23},"end":{"line":42,"column":2}},"33":{"start":{"line":35,"column":20},"end":{"line":38,"column":5}},"34":{"start":{"line":39,"column":18},"end":{"line":39,"column":92}},"35":{"start":{"line":40,"column":4},"end":{"line":40,"column":34}},"36":{"start":{"line":41,"column":4},"end":{"line":41,"column":17}},"37":{"start":{"line":43,"column":15},"end":{"line":46,"column":2}},"38":{"start":{"line":43,"column":26},"end":{"line":46,"column":2}},"39":{"start":{"line":44,"column":20},"end":{"line":44,"column":73}},"40":{"start":{"line":45,"column":4},"end":{"line":45,"column":19}},"41":{"start":{"line":47,"column":21},"end":{"line":52,"column":1}},"42":{"start":{"line":53,"column":0},"end":{"line":53,"column":31}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":13},"end":{"line":19,"column":14}},"loc":{"start":{"line":19,"column":27},"end":{"line":29,"column":2}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":19,"column":61},"end":{"line":19,"column":62}},"loc":{"start":{"line":19,"column":74},"end":{"line":29,"column":1}},"line":19},"10":{"name":"(anonymous_10)","decl":{"start":{"line":30,"column":16},"end":{"line":30,"column":17}},"loc":{"start":{"line":30,"column":36},"end":{"line":33,"column":2}},"line":30},"11":{"name":"(anonymous_11)","decl":{"start":{"line":30,"column":70},"end":{"line":30,"column":71}},"loc":{"start":{"line":30,"column":83},"end":{"line":33,"column":1}},"line":30},"12":{"name":"(anonymous_12)","decl":{"start":{"line":34,"column":13},"end":{"line":34,"column":14}},"loc":{"start":{"line":34,"column":23},"end":{"line":42,"column":2}},"line":34},"13":{"name":"(anonymous_13)","decl":{"start":{"line":34,"column":57},"end":{"line":34,"column":58}},"loc":{"start":{"line":34,"column":70},"end":{"line":42,"column":1}},"line":34},"14":{"name":"(anonymous_14)","decl":{"start":{"line":43,"column":15},"end":{"line":43,"column":16}},"loc":{"start":{"line":43,"column":26},"end":{"line":46,"column":2}},"line":43},"15":{"name":"(anonymous_15)","decl":{"start":{"line":43,"column":60},"end":{"line":43,"column":61}},"loc":{"start":{"line":43,"column":73},"end":{"line":46,"column":1}},"line":43}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":17,"column":17},"end":{"line":17,"column":45}},"type":"binary-expr","locations":[{"start":{"line":17,"column":17},"end":{"line":17,"column":39}},{"start":{"line":17,"column":43},"end":{"line":17,"column":45}}],"line":17},"9":{"loc":{"start":{"line":18,"column":18},"end":{"line":18,"column":62}},"type":"binary-expr","locations":[{"start":{"line":18,"column":18},"end":{"line":18,"column":40}},{"start":{"line":18,"column":44},"end":{"line":18,"column":62}}],"line":18},"10":{"loc":{"start":{"line":20,"column":4},"end":{"line":25,"column":5}},"type":"if","locations":[{"start":{"line":20,"column":4},"end":{"line":25,"column":5}},{"start":{"line":20,"column":4},"end":{"line":25,"column":5}}],"line":20}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":1,"42":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":2,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[0,2],"7":[2,2],"8":[1,1],"9":[1,1],"10":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/services/authServices.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/services/authServices.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,oDAA4B;AAC5B,gEAA+B;AAG/B,IAAI,UAAU,GAAG,OAAO,CAAC,GAAG,CAAC,UAAU,IAAI,EAAE,CAAC;AAC9C,MAAM,SAAS,GAAG,OAAO,CAAC,GAAG,CAAC,UAAU,IAAI,kBAAkB,CAAC,CAAC,MAAM;AAGtE,MAAM,IAAI,GAAG,CAAO,QAAe,EAAmB,EAAE;IACpD,IAAI,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE;QACzB,UAAU,GAAG,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAA;KACjD;SAAM;QACP,MAAM,IAAI,KAAK,CAAC,4CAA4C,CAAC,CAAA;KAC5D;IACD,MAAM,IAAI,GAAG,MAAM,gBAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;IACrD,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAA;IAC3B,OAAO,IAAI,CAAC;AAChB,CAAC,CAAA,CAAA;AACD,MAAM,OAAO,GAAG,CAAO,QAAe,EAAE,IAAY,EAAoB,EAAE;IACtE,MAAM,KAAK,GAAG,MAAM,gBAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;IAEnD,OAAO,KAAK,CAAA;AAChB,CAAC,CAAA,CAAA;AACD,MAAM,IAAI,GAAG,CAAO,IAAU,EAAmB,EAAE;IAC/C,MAAM,OAAO,GAAG;QACZ,EAAE,EAAE,IAAI,CAAC,EAAE;QACX,KAAK,EAAE,IAAI,CAAC,KAAK;KACpB,CAAA;IACD,MAAM,KAAK,GAAG,MAAM,sBAAG,CAAC,IAAI,CAAC,OAAO,EAAE,SAAS,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;IACtE,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC,CAAA;IAC7B,OAAO,KAAK,CAAA;AAChB,CAAC,CAAA,CAAA;AACD,MAAM,MAAM,GAAG,CAAO,KAAY,EAAE,EAAE;IAClC,MAAM,OAAO,GAAG,MAAM,sBAAG,CAAC,MAAM,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;IACnD,OAAO,OAAO,CAAA;AAClB,CAAC,CAAA,CAAA;AACD,MAAM,YAAY,GAAG;IACjB,IAAI;IACJ,OAAO;IACP,IAAI;IACJ,MAAM;CACT,CAAA;AAED,kBAAe,YAAY,CAAC","sourcesContent":["\r\nimport bcrypt from 'bcrypt';\r\nimport jwt from 'jsonwebtoken';\r\nimport { IUser } from '../interfaces/usersInterfaces';\r\n\r\nlet saltRounds = process.env.SALTROUNDS || 10;\r\nconst jwtSecret = process.env.JWT_SECRET || \"youwillneverknow\"; //TODO\r\n\r\n\r\nconst hash = async (password:string): Promise<string> => {\r\n    if (process.env.SALT_ROUNDS) {\r\n        saltRounds = parseInt(process.env.SALT_ROUNDS)\r\n    } else {\r\n    throw new Error(\"saltRounds environment variable is not set\")\r\n    }\r\n    const hash = await bcrypt.hash(password, saltRounds);\r\n    console.log(\"hash: \", hash)\r\n    return hash;\r\n}\r\nconst compare = async (password:string, hash: string): Promise<boolean> => {\r\n    const match = await bcrypt.compare(password, hash);\r\n    \r\n    return match\r\n}\r\nconst sign = async (user:IUser): Promise<string> => {\r\n    const payload = {\r\n        id: user.id,\r\n        email: user.email,\r\n    }\r\n    const token = await jwt.sign(payload, jwtSecret, { expiresIn: '4h' });\r\n    console.log(\"token: \", token)\r\n    return token\r\n}\r\nconst verify = async (token:string) => {\r\n    const decoded = await jwt.verify(token, jwtSecret);    \r\n    return decoded\r\n}\r\nconst authServices = {\r\n    hash,\r\n    compare,\r\n    sign,\r\n    verify\r\n}\r\n\r\nexport default authServices;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9150ac7e3ca94ebc181530e0678f3b546d41a754","contentHash":"9cf05ac4ae082d4ac8d791b55c5fdb645f1fa19e4968dcb5a14ccde4719612d8"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\middleware\\usersMiddlewares.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\middleware\\usersMiddlewares.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":28},"end":{"line":13,"column":1}},"2":{"start":{"line":4,"column":76},"end":{"line":4,"column":84}},"3":{"start":{"line":5,"column":4},"end":{"line":10,"column":5}},"4":{"start":{"line":6,"column":8},"end":{"line":9,"column":11}},"5":{"start":{"line":12,"column":4},"end":{"line":12,"column":18}},"6":{"start":{"line":14,"column":25},"end":{"line":16,"column":1}},"7":{"start":{"line":17,"column":0},"end":{"line":17,"column":35}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":28},"end":{"line":3,"column":29}},"loc":{"start":{"line":3,"column":48},"end":{"line":13,"column":1}},"line":3}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":4},"end":{"line":10,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":10,"column":5}},{"start":{"line":5,"column":4},"end":{"line":10,"column":5}}],"line":5},"1":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":83}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":18}},{"start":{"line":5,"column":22},"end":{"line":5,"column":31}},{"start":{"line":5,"column":35},"end":{"line":5,"column":41}},{"start":{"line":5,"column":45},"end":{"line":5,"column":54}},{"start":{"line":5,"column":58},"end":{"line":5,"column":73}},{"start":{"line":5,"column":77},"end":{"line":5,"column":83}}],"line":5}},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":1,"7":1},"f":{"0":0},"b":{"0":[0,0],"1":[0,0,0,0,0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/middleware/usersMiddlewares.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/middleware/usersMiddlewares.ts"],"names":[],"mappings":";;AAGA,MAAM,mBAAmB,GAAG,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IAC5E,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,cAAc,EAAE,KAAK,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;IACjF,IAAI,CAAC,SAAS,IAAI,CAAC,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,QAAQ,IAAI,CAAC,cAAc,IAAI,CAAC,KAAK,EAAE;QAC7E,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACxB,OAAO,EAAE,KAAK;YACd,OAAO,EAAE,oFAAoF;SAChG,CAAC,CAAC;KACN;IAAA,CAAC;IACF,OAAO,IAAI,EAAE,CAAC;AAClB,CAAC,CAAA;AAED,MAAM,gBAAgB,GAAG;IACrB,mBAAmB;CACtB,CAAC;AAEF,kBAAe,gBAAgB,CAAC","sourcesContent":["import { Request, Response, NextFunction } from \"express\";\r\n\r\n\r\nconst checkCreateUserData = (req: Request, res: Response, next: NextFunction) => {\r\n    const { firstName, lastName, email, password, personalNumber, phone } = req.body;\r\n    if (!firstName || !lastName || !email || !password || !personalNumber || !phone) {\r\n        return res.status(400).json({\r\n            success: false,\r\n            message: `Some data is missing (firstName, lastName, email, password, personalNumber, phone)`,\r\n        });\r\n    };\r\n    return next();\r\n}\r\n\r\nconst usersMiddlewares = {\r\n    checkCreateUserData\r\n};\r\n\r\nexport default usersMiddlewares;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cf0f2e41763c228831fa9cdfc07a6fa9b502e58a","contentHash":"8bd9c021acc18fc6b7d08b0dc64310a6e5753227002e69931e11613a1f7b2f68"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\routes\\addressesRoutes.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\routes\\addressesRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":30},"end":{"line":7,"column":103}},"5":{"start":{"line":8,"column":31},"end":{"line":8,"column":93}},"6":{"start":{"line":9,"column":24},"end":{"line":9,"column":50}},"7":{"start":{"line":10,"column":0},"end":{"line":14,"column":69}},"8":{"start":{"line":15,"column":0},"end":{"line":15,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{"0":3},"b":{"0":[1,1,1],"1":[2,1],"2":[3,3]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/routes/addressesRoutes.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/routes/addressesRoutes.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,wGAAiF;AACjF,8FAAsE;AAEtE,MAAM,eAAe,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEzC,eAAe;KACV,GAAG,CAAC,GAAG,EAAE,6BAAoB,CAAC,eAAe,CAAC;KAC9C,GAAG,CAAC,MAAM,EAAE,6BAAoB,CAAC,cAAc,CAAC;KAChD,IAAI,CAAC,MAAM,EAAE,8BAAoB,CAAC,sBAAsB,EAAE,6BAAoB,CAAC,gBAAgB,CAAC;KAChG,MAAM,CAAC,MAAM,EAAE,6BAAoB,CAAC,iBAAiB,CAAC,CAAC;AAE5D,kBAAe,eAAe,CAAC","sourcesContent":["import express from 'express';\r\nimport addressesControllers from '../components/controllers/addressesController';\r\nimport addressesMiddlewares from '../middleware/addressesMiddlewares';\r\n\r\nconst addressesRoutes = express.Router();\r\n\r\naddressesRoutes\r\n    .get(\"/\", addressesControllers.getAllAddresses)\r\n    .get(\"/:id\", addressesControllers.getAddressById)\r\n    .post(\"/:id\", addressesMiddlewares.checkCreateAddressData, addressesControllers.createNewAddress)\r\n    .delete(\"/:id\", addressesControllers.deleteAddressById);\r\n\r\nexport default addressesRoutes;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6de3d36a7c0aefafb88752a5f9ee97ddf556f25a","contentHash":"c628b33bfe15d4727f34c7b8149882d016c9eaae5315177255c79dab5addeded"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\controllers\\addressesController.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\controllers\\addressesController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":26},"end":{"line":15,"column":81}},"16":{"start":{"line":16,"column":24},"end":{"line":30,"column":1}},"17":{"start":{"line":17,"column":4},"end":{"line":29,"column":5}},"18":{"start":{"line":19,"column":23},"end":{"line":19,"column":41}},"19":{"start":{"line":20,"column":8},"end":{"line":20,"column":64}},"20":{"start":{"line":21,"column":8},"end":{"line":25,"column":11}},"21":{"start":{"line":28,"column":8},"end":{"line":28,"column":20}},"22":{"start":{"line":31,"column":23},"end":{"line":48,"column":2}},"23":{"start":{"line":31,"column":43},"end":{"line":48,"column":2}},"24":{"start":{"line":32,"column":4},"end":{"line":47,"column":5}},"25":{"start":{"line":33,"column":19},"end":{"line":33,"column":46}},"26":{"start":{"line":34,"column":24},"end":{"line":34,"column":75}},"27":{"start":{"line":35,"column":8},"end":{"line":36,"column":49}},"28":{"start":{"line":36,"column":12},"end":{"line":36,"column":49}},"29":{"start":{"line":37,"column":8},"end":{"line":43,"column":11}},"30":{"start":{"line":46,"column":8},"end":{"line":46,"column":20}},"31":{"start":{"line":49,"column":25},"end":{"line":72,"column":2}},"32":{"start":{"line":49,"column":45},"end":{"line":72,"column":2}},"33":{"start":{"line":50,"column":4},"end":{"line":71,"column":5}},"34":{"start":{"line":51,"column":104},"end":{"line":51,"column":112}},"35":{"start":{"line":52,"column":27},"end":{"line":60,"column":9}},"36":{"start":{"line":61,"column":19},"end":{"line":61,"column":76}},"37":{"start":{"line":62,"column":8},"end":{"line":63,"column":67}},"38":{"start":{"line":63,"column":12},"end":{"line":63,"column":67}},"39":{"start":{"line":64,"column":8},"end":{"line":67,"column":11}},"40":{"start":{"line":70,"column":8},"end":{"line":70,"column":20}},"41":{"start":{"line":73,"column":26},"end":{"line":87,"column":2}},"42":{"start":{"line":73,"column":46},"end":{"line":87,"column":2}},"43":{"start":{"line":74,"column":4},"end":{"line":86,"column":5}},"44":{"start":{"line":75,"column":19},"end":{"line":75,"column":46}},"45":{"start":{"line":76,"column":24},"end":{"line":76,"column":75}},"46":{"start":{"line":77,"column":8},"end":{"line":78,"column":67}},"47":{"start":{"line":78,"column":12},"end":{"line":78,"column":67}},"48":{"start":{"line":79,"column":8},"end":{"line":82,"column":11}},"49":{"start":{"line":85,"column":8},"end":{"line":85,"column":20}},"50":{"start":{"line":88,"column":29},"end":{"line":93,"column":1}},"51":{"start":{"line":94,"column":0},"end":{"line":94,"column":39}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":16,"column":24},"end":{"line":16,"column":25}},"loc":{"start":{"line":16,"column":44},"end":{"line":30,"column":1}},"line":16},"9":{"name":"(anonymous_9)","decl":{"start":{"line":31,"column":23},"end":{"line":31,"column":24}},"loc":{"start":{"line":31,"column":43},"end":{"line":48,"column":2}},"line":31},"10":{"name":"(anonymous_10)","decl":{"start":{"line":31,"column":77},"end":{"line":31,"column":78}},"loc":{"start":{"line":31,"column":90},"end":{"line":48,"column":1}},"line":31},"11":{"name":"(anonymous_11)","decl":{"start":{"line":49,"column":25},"end":{"line":49,"column":26}},"loc":{"start":{"line":49,"column":45},"end":{"line":72,"column":2}},"line":49},"12":{"name":"(anonymous_12)","decl":{"start":{"line":49,"column":79},"end":{"line":49,"column":80}},"loc":{"start":{"line":49,"column":92},"end":{"line":72,"column":1}},"line":49},"13":{"name":"(anonymous_13)","decl":{"start":{"line":73,"column":26},"end":{"line":73,"column":27}},"loc":{"start":{"line":73,"column":46},"end":{"line":87,"column":2}},"line":73},"14":{"name":"(anonymous_14)","decl":{"start":{"line":73,"column":80},"end":{"line":73,"column":81}},"loc":{"start":{"line":73,"column":93},"end":{"line":87,"column":1}},"line":73}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":35,"column":8},"end":{"line":36,"column":49}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":36,"column":49}},{"start":{"line":35,"column":8},"end":{"line":36,"column":49}}],"line":35},"9":{"loc":{"start":{"line":62,"column":8},"end":{"line":63,"column":67}},"type":"if","locations":[{"start":{"line":62,"column":8},"end":{"line":63,"column":67}},{"start":{"line":62,"column":8},"end":{"line":63,"column":67}}],"line":62},"10":{"loc":{"start":{"line":77,"column":8},"end":{"line":78,"column":67}},"type":"if","locations":[{"start":{"line":77,"column":8},"end":{"line":78,"column":67}},{"start":{"line":77,"column":8},"end":{"line":78,"column":67}}],"line":77}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":1,"51":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,0],"9":[0,0],"10":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/controllers/addressesController.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/controllers/addressesController.ts"],"names":[],"mappings":"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","sourcesContent":["import { NextFunction, Request, Response } from 'express';\r\nimport { IAddress } from '../interfaces/addressesInterfaces';\r\nimport { addresses } from '../mockData/mockData';\r\nimport addressServices from '../services/addressServices';\r\n\r\nconst getAllAddresses = (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n        let addresses;\r\n        const { id } = res.locals.address;\r\n        addresses = addressServices.getAllAddresses();\r\n\r\n        res.status(200).json({\r\n            success: true,\r\n            message: 'List of addresses',\r\n            addresses,\r\n        });\r\n    } catch (error) {\r\n        next(error);\r\n    }   \r\n}\r\n\r\nconst getAddressById = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n        const id = parseInt(req.params.id, 10);\r\n        const address = await addressServices.findAddressById(id);\r\n        if (!address) throw new Error('Address not found');\r\n\r\n        return res.status(200).json({\r\n            success: true,\r\n            message: `Address`,\r\n            data: {\r\n                address: address\r\n            },\r\n        });\r\n    } catch (error) {\r\n        next(error);\r\n    }   \r\n};\r\n\r\nconst createNewAddress = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n        const { postalCode, houseNumber, streetName, county, municipality, apartmentNumber, country } = req.body;\r\n        const newAddress = {\r\n            postalCode,\r\n            houseNumber,\r\n            streetName,\r\n            county,\r\n            municipality,\r\n            apartmentNumber,\r\n            country,\r\n        }\r\n        const id = await addressServices.createAddress(newAddress);\r\n        if (!id) throw new Error('Error, did manage to create address')\r\n        return res.status(201).json({\r\n            success: true,\r\n            message: `Address with id ${id} created`,\r\n        });\r\n    } catch (error) {\r\n        next(error);\r\n    }   \r\n};\r\n\r\nconst deleteAddressById = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n        const id = parseInt(req.params.id, 10);\r\n        const address = await addressServices.findAddressById(id);\r\n        if (!address) throw new Error('Error, did manage to delete address');\r\n        return res.status(200).json({\r\n            success: true,\r\n            message: `Address deleted`,\r\n        });\r\n    } catch (error) {\r\n        next(error);\r\n    }   \r\n};\r\n\r\nconst addressesControllers = {\r\n    getAllAddresses,\r\n    getAddressById,\r\n    createNewAddress,\r\n    deleteAddressById,\r\n}\r\n\r\n\r\nexport default addressesControllers;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ecc89f6852c107169750767f203aa091d2cec687","contentHash":"5fec3cc86ff97828497aac4e48b2f40a4883b94c0bff121c93a410ebf62812f8"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\services\\addressServices.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\services\\addressServices.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":61}},"16":{"start":{"line":16,"column":24},"end":{"line":19,"column":2}},"17":{"start":{"line":16,"column":30},"end":{"line":19,"column":2}},"18":{"start":{"line":17,"column":16},"end":{"line":17,"column":73}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":13}},"20":{"start":{"line":20,"column":24},"end":{"line":23,"column":2}},"21":{"start":{"line":20,"column":32},"end":{"line":23,"column":2}},"22":{"start":{"line":21,"column":22},"end":{"line":21,"column":179}},"23":{"start":{"line":22,"column":4},"end":{"line":22,"column":22}},"24":{"start":{"line":24,"column":22},"end":{"line":37,"column":2}},"25":{"start":{"line":24,"column":35},"end":{"line":37,"column":2}},"26":{"start":{"line":25,"column":23},"end":{"line":33,"column":5}},"27":{"start":{"line":34,"column":21},"end":{"line":34,"column":96}},"28":{"start":{"line":36,"column":4},"end":{"line":36,"column":27}},"29":{"start":{"line":38,"column":24},"end":{"line":42,"column":1}},"30":{"start":{"line":43,"column":0},"end":{"line":43,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":16,"column":24},"end":{"line":16,"column":25}},"loc":{"start":{"line":16,"column":30},"end":{"line":19,"column":2}},"line":16},"9":{"name":"(anonymous_9)","decl":{"start":{"line":16,"column":64},"end":{"line":16,"column":65}},"loc":{"start":{"line":16,"column":77},"end":{"line":19,"column":1}},"line":16},"10":{"name":"(anonymous_10)","decl":{"start":{"line":20,"column":24},"end":{"line":20,"column":25}},"loc":{"start":{"line":20,"column":32},"end":{"line":23,"column":2}},"line":20},"11":{"name":"(anonymous_11)","decl":{"start":{"line":20,"column":66},"end":{"line":20,"column":67}},"loc":{"start":{"line":20,"column":79},"end":{"line":23,"column":1}},"line":20},"12":{"name":"(anonymous_12)","decl":{"start":{"line":24,"column":22},"end":{"line":24,"column":23}},"loc":{"start":{"line":24,"column":35},"end":{"line":37,"column":2}},"line":24},"13":{"name":"(anonymous_13)","decl":{"start":{"line":24,"column":69},"end":{"line":24,"column":70}},"loc":{"start":{"line":24,"column":82},"end":{"line":37,"column":1}},"line":24}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":1,"30":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/services/addressServices.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/services/addressServices.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,8DAAkC;AAIlC,MAAM,eAAe,GAAG,GAAS,EAAE;IAC/B,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,kBAAI,CAAC,KAAK,CAAC,yBAAyB,CAAC,CAAC;IACxD,OAAO,CAAC,CAAC;AACb,CAAC,CAAA,CAAA;AAED,MAAM,eAAe,GAAG,CAAO,EAAU,EAAE,EAAE;IACzC,MAAM,CAAC,OAAO,CAAC,GAAmC,MAAM,kBAAI,CAAC,KAAK,CAAC,uHAAuH,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAClM,OAAO,OAAO,CAAC,CAAC,CAAC,CAAC;AACtB,CAAC,CAAA,CAAC;AAIF,MAAM,aAAa,GAAG,CAAO,OAAiB,EAA4B,EAAE;IACxE,MAAM,UAAU,GAAa;QACzB,UAAU,EAAE,OAAO,CAAC,UAAU;QAC9B,WAAW,EAAE,OAAO,CAAC,WAAW;QAChC,eAAe,EAAE,OAAO,CAAC,eAAe;QACxC,UAAU,EAAE,OAAO,CAAC,UAAU;QAC9B,YAAY,EAAE,OAAO,CAAC,YAAY;QAClC,MAAM,EAAE,OAAO,CAAC,MAAM;QACtB,OAAO,EAAE,OAAO,CAAC,OAAO;KAC3B,CAAC;IAEF,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAI,CAAC,KAAK,CAAC,6BAA6B,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;IACjH,eAAe;IACf,OAAO,MAAM,CAAC,QAAQ,CAAC;AAC3B,CAAC,CAAA,CAAA;AAED,MAAM,eAAe,GAAG;IACpB,eAAe;IACf,eAAe;IACf,aAAa;CAChB,CAAA;AAED,kBAAe,eAAe,CAAC","sourcesContent":["import { FieldPacket, ResultSetHeader } from 'mysql2';\r\nimport pool from '../../database';\r\nimport { IAddressSQL, IAddress } from '../interfaces/addressesInterfaces';\r\n\r\n\r\nconst getAllAddresses = async () => {\r\n    const [a] = await pool.query('select * from Addresses');\r\n    return a;\r\n}\r\n\r\nconst findAddressById = async (id: number) => {\r\n    const [address]: [IAddressSQL[], FieldPacket[]] = await pool.query(`SELECT postalCode, houseNumber, apartmentNumber, streetName, municipality, county, country FROM Addresses WHERE id=?;`, [id]);\r\n    return address[0];\r\n};\r\n\r\n\r\n    \r\nconst createAddress = async (address: IAddress):Promise<number | boolean> => {\r\n    const newAddress: IAddress = {\r\n        postalCode: address.postalCode,\r\n        houseNumber: address.houseNumber,\r\n        apartmentNumber: address.apartmentNumber,\r\n        streetName: address.streetName,\r\n        municipality: address.municipality,\r\n        county: address.county,\r\n        country: address.country,\r\n    };\r\n    \r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query(`INSERT INTO Addresses SET ?`, [newAddress]);\r\n    //return false;\r\n    return result.insertId;\r\n}\r\n\r\nconst addressServices = {\r\n    getAllAddresses,\r\n    findAddressById,\r\n    createAddress,\r\n}\r\n\r\nexport default addressServices;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"897eaeb2b145bcad8caf5fa8b6e232f848714afd","contentHash":"7d17d2904e572a1ac2dee65918fc53a5368c16b176785442be598ab3359e5e94"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\middleware\\addressesMiddlewares.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\middleware\\addressesMiddlewares.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":29},"end":{"line":15,"column":1}},"2":{"start":{"line":5,"column":95},"end":{"line":5,"column":103}},"3":{"start":{"line":6,"column":8},"end":{"line":11,"column":9}},"4":{"start":{"line":7,"column":12},"end":{"line":10,"column":15}},"5":{"start":{"line":13,"column":8},"end":{"line":13,"column":15}},"6":{"start":{"line":16,"column":0},"end":{"line":16,"column":39}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":28},"end":{"line":4,"column":29}},"loc":{"start":{"line":4,"column":48},"end":{"line":14,"column":5}},"line":4}},"branchMap":{"0":{"loc":{"start":{"line":6,"column":8},"end":{"line":11,"column":9}},"type":"if","locations":[{"start":{"line":6,"column":8},"end":{"line":11,"column":9}},{"start":{"line":6,"column":8},"end":{"line":11,"column":9}}],"line":6},"1":{"loc":{"start":{"line":6,"column":12},"end":{"line":6,"column":102}},"type":"binary-expr","locations":[{"start":{"line":6,"column":12},"end":{"line":6,"column":23}},{"start":{"line":6,"column":27},"end":{"line":6,"column":39}},{"start":{"line":6,"column":43},"end":{"line":6,"column":54}},{"start":{"line":6,"column":58},"end":{"line":6,"column":65}},{"start":{"line":6,"column":69},"end":{"line":6,"column":82}},{"start":{"line":6,"column":86},"end":{"line":6,"column":102}}],"line":6}},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":1},"f":{"0":0},"b":{"0":[0,0],"1":[0,0,0,0,0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/middleware/addressesMiddlewares.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/middleware/addressesMiddlewares.ts"],"names":[],"mappings":";;AAEA,MAAM,oBAAoB,GAAG;IACzB,sBAAsB,EAAE,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;QACxE,MAAM,EAAE,UAAU,EAAE,WAAW,EAAE,UAAU,EAAE,MAAM,EAAE,YAAY,EAAE,eAAe,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;QAChG,IAAI,CAAC,UAAU,IAAI,CAAC,WAAW,IAAI,CAAC,UAAU,IAAI,CAAC,MAAM,IAAI,CAAC,YAAY,IAAI,CAAC,eAAe,EAAE;YAC5F,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;gBACxB,OAAO,EAAE,KAAK;gBACd,OAAO,EAAE,mGAAmG;aAC/G,CAAC,CAAC;SACN;QAAA,CAAC;QACF,IAAI,EAAE,CAAC;IACX,CAAC;CACJ,CAAC;AAEF,kBAAe,oBAAoB,CAAC","sourcesContent":["import { Request, Response, NextFunction } from \"express\";\r\n\r\nconst addressesMiddlewares = {\r\n    checkCreateAddressData: (req: Request, res: Response, next: NextFunction) => {\r\n        const { postalCode, houseNumber, streetName, county, municipality, apartmentNumber } = req.body;\r\n        if (!postalCode || !houseNumber || !streetName || !county || !municipality || !apartmentNumber) {\r\n            return res.status(400).json({\r\n                success: false,\r\n                message: `Some data is missing (postalCode, houseNumber, streetName, county, municipality, apartmentNumber)`,\r\n            });\r\n        };\r\n        next();\r\n    }\r\n};\r\n\r\nexport default addressesMiddlewares;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3f40613d61ca52da2b162e6b066eb56004e6f17d","contentHash":"9a708e41660d7365810e80dc461a247ac116c5fd9b771995782625822ac5e3a0"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\routes\\waterMeterRoutes.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\routes\\waterMeterRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":32},"end":{"line":7,"column":107}},"5":{"start":{"line":8,"column":33},"end":{"line":8,"column":97}},"6":{"start":{"line":9,"column":26},"end":{"line":9,"column":52}},"7":{"start":{"line":10,"column":0},"end":{"line":14,"column":74}},"8":{"start":{"line":15,"column":0},"end":{"line":15,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{"0":3},"b":{"0":[1,1,1],"1":[2,1],"2":[3,3]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/routes/waterMeterRoutes.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/routes/waterMeterRoutes.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,4GAAoF;AACpF,kGAAyE;AAEzE,MAAM,iBAAiB,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAE3C,iBAAiB;KACZ,GAAG,CAAC,GAAG,EAAE,+BAAqB,CAAC,iBAAiB,CAAC;KACjD,GAAG,CAAC,MAAM,EAAE,+BAAqB,CAAC,iBAAiB,CAAC;KACpD,IAAI,CAAC,MAAM,EAAE,gCAAqB,CAAC,yBAAyB,EAAE,+BAAqB,CAAC,mBAAmB,CAAC;KACxG,MAAM,CAAC,MAAM,EAAE,+BAAqB,CAAC,oBAAoB,CAAC,CAAC;AAEhE,kBAAe,iBAAiB,CAAC","sourcesContent":["import express from 'express';\r\nimport waterMeterControllers from '../components/controllers/waterMetersController';\r\nimport waterMetersMiddleware from '../middleware/waterMetersMiddlewares';\r\n\r\nconst waterMetersRoutes = express.Router();\r\n\r\nwaterMetersRoutes\r\n    .get(\"/\", waterMeterControllers.getAllWaterMeters)\r\n    .get(\"/:id\", waterMeterControllers.getWaterMeterById)\r\n    .post(\"/:id\", waterMetersMiddleware.checkCreateWaterMeterData, waterMeterControllers.createNewWaterMeter)\r\n    .delete(\"/:id\", waterMeterControllers.deleteWaterMeterById);\r\n\r\nexport default waterMetersRoutes;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b1b6da72138ee2a3813fc70610692c2b962a85f7","contentHash":"7cb750a614f5aa4f53df83a48590b12b65dc261aa5bda8261e0444149278ba4f"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\controllers\\waterMetersController.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\controllers\\waterMetersController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":29},"end":{"line":15,"column":87}},"16":{"start":{"line":16,"column":26},"end":{"line":29,"column":2}},"17":{"start":{"line":16,"column":46},"end":{"line":29,"column":2}},"18":{"start":{"line":17,"column":4},"end":{"line":28,"column":5}},"19":{"start":{"line":19,"column":8},"end":{"line":19,"column":77}},"20":{"start":{"line":20,"column":8},"end":{"line":24,"column":11}},"21":{"start":{"line":27,"column":8},"end":{"line":27,"column":20}},"22":{"start":{"line":30,"column":26},"end":{"line":47,"column":2}},"23":{"start":{"line":30,"column":46},"end":{"line":47,"column":2}},"24":{"start":{"line":31,"column":4},"end":{"line":46,"column":5}},"25":{"start":{"line":32,"column":19},"end":{"line":32,"column":42}},"26":{"start":{"line":33,"column":27},"end":{"line":33,"column":77}},"27":{"start":{"line":34,"column":8},"end":{"line":35,"column":52}},"28":{"start":{"line":35,"column":12},"end":{"line":35,"column":52}},"29":{"start":{"line":36,"column":8},"end":{"line":42,"column":11}},"30":{"start":{"line":45,"column":8},"end":{"line":45,"column":20}},"31":{"start":{"line":48,"column":28},"end":{"line":69,"column":2}},"32":{"start":{"line":48,"column":48},"end":{"line":69,"column":2}},"33":{"start":{"line":49,"column":4},"end":{"line":68,"column":5}},"34":{"start":{"line":50,"column":76},"end":{"line":50,"column":84}},"35":{"start":{"line":51,"column":30},"end":{"line":57,"column":9}},"36":{"start":{"line":58,"column":19},"end":{"line":58,"column":79}},"37":{"start":{"line":59,"column":8},"end":{"line":60,"column":70}},"38":{"start":{"line":60,"column":12},"end":{"line":60,"column":70}},"39":{"start":{"line":61,"column":8},"end":{"line":64,"column":11}},"40":{"start":{"line":67,"column":8},"end":{"line":67,"column":20}},"41":{"start":{"line":70,"column":29},"end":{"line":87,"column":2}},"42":{"start":{"line":70,"column":49},"end":{"line":87,"column":2}},"43":{"start":{"line":71,"column":4},"end":{"line":86,"column":5}},"44":{"start":{"line":72,"column":19},"end":{"line":72,"column":42}},"45":{"start":{"line":73,"column":27},"end":{"line":73,"column":83}},"46":{"start":{"line":74,"column":8},"end":{"line":75,"column":52}},"47":{"start":{"line":75,"column":12},"end":{"line":75,"column":52}},"48":{"start":{"line":76,"column":23},"end":{"line":76,"column":78}},"49":{"start":{"line":77,"column":8},"end":{"line":78,"column":70}},"50":{"start":{"line":78,"column":12},"end":{"line":78,"column":70}},"51":{"start":{"line":79,"column":8},"end":{"line":82,"column":11}},"52":{"start":{"line":85,"column":8},"end":{"line":85,"column":20}},"53":{"start":{"line":88,"column":31},"end":{"line":93,"column":1}},"54":{"start":{"line":94,"column":0},"end":{"line":94,"column":41}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":16,"column":26},"end":{"line":16,"column":27}},"loc":{"start":{"line":16,"column":46},"end":{"line":29,"column":2}},"line":16},"9":{"name":"(anonymous_9)","decl":{"start":{"line":16,"column":80},"end":{"line":16,"column":81}},"loc":{"start":{"line":16,"column":93},"end":{"line":29,"column":1}},"line":16},"10":{"name":"(anonymous_10)","decl":{"start":{"line":30,"column":26},"end":{"line":30,"column":27}},"loc":{"start":{"line":30,"column":46},"end":{"line":47,"column":2}},"line":30},"11":{"name":"(anonymous_11)","decl":{"start":{"line":30,"column":80},"end":{"line":30,"column":81}},"loc":{"start":{"line":30,"column":93},"end":{"line":47,"column":1}},"line":30},"12":{"name":"(anonymous_12)","decl":{"start":{"line":48,"column":28},"end":{"line":48,"column":29}},"loc":{"start":{"line":48,"column":48},"end":{"line":69,"column":2}},"line":48},"13":{"name":"(anonymous_13)","decl":{"start":{"line":48,"column":82},"end":{"line":48,"column":83}},"loc":{"start":{"line":48,"column":95},"end":{"line":69,"column":1}},"line":48},"14":{"name":"(anonymous_14)","decl":{"start":{"line":70,"column":29},"end":{"line":70,"column":30}},"loc":{"start":{"line":70,"column":49},"end":{"line":87,"column":2}},"line":70},"15":{"name":"(anonymous_15)","decl":{"start":{"line":70,"column":83},"end":{"line":70,"column":84}},"loc":{"start":{"line":70,"column":96},"end":{"line":87,"column":1}},"line":70}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":34,"column":8},"end":{"line":35,"column":52}},"type":"if","locations":[{"start":{"line":34,"column":8},"end":{"line":35,"column":52}},{"start":{"line":34,"column":8},"end":{"line":35,"column":52}}],"line":34},"9":{"loc":{"start":{"line":59,"column":8},"end":{"line":60,"column":70}},"type":"if","locations":[{"start":{"line":59,"column":8},"end":{"line":60,"column":70}},{"start":{"line":59,"column":8},"end":{"line":60,"column":70}}],"line":59},"10":{"loc":{"start":{"line":74,"column":8},"end":{"line":75,"column":52}},"type":"if","locations":[{"start":{"line":74,"column":8},"end":{"line":75,"column":52}},{"start":{"line":74,"column":8},"end":{"line":75,"column":52}}],"line":74},"11":{"loc":{"start":{"line":77,"column":8},"end":{"line":78,"column":70}},"type":"if","locations":[{"start":{"line":77,"column":8},"end":{"line":78,"column":70}},{"start":{"line":77,"column":8},"end":{"line":78,"column":70}}],"line":77}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":1,"54":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/controllers/waterMetersController.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/controllers/waterMetersController.ts"],"names":[],"mappings":"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","sourcesContent":["import { NextFunction, Request, Response } from 'express';\r\nimport waterMeterServices from '../services/waterMeterServices';\r\n\r\nconst getAllWaterMeters = async(req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n        let watermeters;\r\n        watermeters = await waterMeterServices.getAllWaterMeters();\r\n\r\n        res.status(200).json({\r\n            success: true,\r\n            message: 'List of watermeters',\r\n            watermeters,\r\n        });\r\n    } catch (error) {\r\n        next(error);\r\n    }\r\n   \r\n}\r\n\r\nconst getWaterMeterById = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n        const id = parseInt(req.params.id);\r\n        const watermeter = waterMeterServices.getWaterMeterById(id);\r\n        if (!watermeter) throw new Error('Watermeter not found');\r\n        \r\n        return res.status(200).json({\r\n            success: true,\r\n            message: `Watermeter`,\r\n            data: {\r\n                watermeter\r\n            },\r\n        });\r\n    } catch (error) {\r\n        next(error);\r\n    }   \r\n};\r\n\r\nconst createNewWaterMeter = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n        const { serialNumber, checkingDate, sealNumber, type, addressId } = req.body;\r\n        const newWaterMeter = {\r\n            serialNumber,\r\n            checkingDate,\r\n            sealNumber,\r\n            type,\r\n            addressId,\r\n        }\r\n        const id = waterMeterServices.createWaterMeter(newWaterMeter);\r\n        if (!id) throw new Error('Error, did manage to create watermeter');\r\n\r\n        return res.status(201).json({\r\n            success: true,\r\n            message: `Watermeter with id ${id} created`,\r\n        });\r\n    } catch (error) {\r\n        next(error);\r\n    }   \r\n};\r\n\r\nconst deleteWaterMeterById = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n        const id = parseInt(req.params.id);\r\n        const watermeter = await waterMeterServices.getWaterMeterById(id);\r\n        if (!watermeter) throw new Error('Watermeter not found');\r\n        const result = await waterMeterServices.deleteWaterMeter(id);\r\n        if (!result) throw new Error('Error, did manage to delete watermeter');\r\n        return res.status(200).json({\r\n            success: true,\r\n            message: `Watermeter deleted`,\r\n        });\r\n    } catch (error) {\r\n        next(error);\r\n    }\r\n};\r\n\r\nconst waterMetersControllers = {\r\n    getAllWaterMeters,\r\n    getWaterMeterById,\r\n    createNewWaterMeter,\r\n    deleteWaterMeterById\r\n}\r\n\r\n\r\nexport default waterMetersControllers;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"12c92a11b8e50f186e07675ade66ed2e8b989ce7","contentHash":"d364bd0591a1604b5e3fb34c489fb5cbe8b68398594455dfd9ef56526c7218df"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\services\\waterMeterServices.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\services\\waterMeterServices.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":61}},"16":{"start":{"line":16,"column":26},"end":{"line":19,"column":2}},"17":{"start":{"line":16,"column":32},"end":{"line":19,"column":2}},"18":{"start":{"line":17,"column":17},"end":{"line":17,"column":77}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":14}},"20":{"start":{"line":20,"column":26},"end":{"line":23,"column":2}},"21":{"start":{"line":20,"column":34},"end":{"line":23,"column":2}},"22":{"start":{"line":21,"column":17},"end":{"line":21,"column":166}},"23":{"start":{"line":22,"column":4},"end":{"line":22,"column":17}},"24":{"start":{"line":24,"column":25},"end":{"line":34,"column":2}},"25":{"start":{"line":24,"column":41},"end":{"line":34,"column":2}},"26":{"start":{"line":25,"column":26},"end":{"line":31,"column":5}},"27":{"start":{"line":32,"column":21},"end":{"line":32,"column":102}},"28":{"start":{"line":33,"column":4},"end":{"line":33,"column":27}},"29":{"start":{"line":35,"column":25},"end":{"line":41,"column":2}},"30":{"start":{"line":35,"column":33},"end":{"line":41,"column":2}},"31":{"start":{"line":36,"column":21},"end":{"line":36,"column":121}},"32":{"start":{"line":37,"column":4},"end":{"line":39,"column":5}},"33":{"start":{"line":38,"column":8},"end":{"line":38,"column":21}},"34":{"start":{"line":40,"column":4},"end":{"line":40,"column":16}},"35":{"start":{"line":42,"column":24},"end":{"line":47,"column":1}},"36":{"start":{"line":48,"column":0},"end":{"line":48,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":16,"column":26},"end":{"line":16,"column":27}},"loc":{"start":{"line":16,"column":32},"end":{"line":19,"column":2}},"line":16},"9":{"name":"(anonymous_9)","decl":{"start":{"line":16,"column":66},"end":{"line":16,"column":67}},"loc":{"start":{"line":16,"column":79},"end":{"line":19,"column":1}},"line":16},"10":{"name":"(anonymous_10)","decl":{"start":{"line":20,"column":26},"end":{"line":20,"column":27}},"loc":{"start":{"line":20,"column":34},"end":{"line":23,"column":2}},"line":20},"11":{"name":"(anonymous_11)","decl":{"start":{"line":20,"column":68},"end":{"line":20,"column":69}},"loc":{"start":{"line":20,"column":81},"end":{"line":23,"column":1}},"line":20},"12":{"name":"(anonymous_12)","decl":{"start":{"line":24,"column":25},"end":{"line":24,"column":26}},"loc":{"start":{"line":24,"column":41},"end":{"line":34,"column":2}},"line":24},"13":{"name":"(anonymous_13)","decl":{"start":{"line":24,"column":75},"end":{"line":24,"column":76}},"loc":{"start":{"line":24,"column":88},"end":{"line":34,"column":1}},"line":24},"14":{"name":"(anonymous_14)","decl":{"start":{"line":35,"column":25},"end":{"line":35,"column":26}},"loc":{"start":{"line":35,"column":33},"end":{"line":41,"column":2}},"line":35},"15":{"name":"(anonymous_15)","decl":{"start":{"line":35,"column":67},"end":{"line":35,"column":68}},"loc":{"start":{"line":35,"column":80},"end":{"line":41,"column":1}},"line":35}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":37,"column":4},"end":{"line":39,"column":5}},"type":"if","locations":[{"start":{"line":37,"column":4},"end":{"line":39,"column":5}},{"start":{"line":37,"column":4},"end":{"line":39,"column":5}}],"line":37}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/services/waterMeterServices.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/services/waterMeterServices.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,8DAAkC;AAIlC,MAAM,iBAAiB,GAAE,GAAS,EAAE;IAChC,MAAM,CAAC,EAAE,CAAC,GAAG,MAAM,kBAAI,CAAC,KAAK,CAAC,4BAA4B,CAAC,CAAC;IAC5D,OAAO,EAAE,CAAC;AACd,CAAC,CAAA,CAAA;AAED,MAAM,iBAAiB,GAAG,CAAM,EAAU,EAAE,EAAE;IAC1C,MAAM,CAAC,EAAE,CAAC,GAAsC,MAAM,kBAAI,CAAC,KAAK,CAAC,+GAA+G,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IACxL,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;AACjB,CAAC,CAAA,CAAC;AAEF,MAAM,gBAAgB,GAAG,CAAO,UAAuB,EAAmB,EAAE;IACxE,MAAM,aAAa,GAAG;QAClB,YAAY,EAAE,UAAU,CAAC,YAAY;QACrC,YAAY,EAAE,UAAU,CAAC,YAAY;QACrC,UAAU,EAAE,UAAU,CAAC,UAAU;QACjC,QAAQ,EAAE,CAAC;QACX,WAAW,EAAE,IAAI;KACpB,CAAC;IAEF,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAI,CAAC,KAAK,CAAC,gCAAgC,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;IAEvH,OAAO,MAAM,CAAC,QAAQ,CAAC;AAC3B,CAAC,CAAA,CAAA;AAGD,MAAM,gBAAgB,GAAG,CAAO,EAAU,EAAoB,EAAE;IAC5D,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAI,CAAC,KAAK,CAAC,kDAAkD,EAAE,CAAC,IAAI,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;IAC1I,IAAI,MAAM,CAAC,YAAY,GAAG,CAAC,EAAE;QACzB,OAAO,KAAK,CAAC;KAChB;IACD,OAAO,IAAI,CAAC;AAChB,CAAC,CAAA,CAAA;AAED,MAAM,eAAe,GAAG;IACpB,iBAAiB;IACjB,iBAAiB;IACjB,gBAAgB;IAChB,gBAAgB;CACnB,CAAA;AAED,kBAAe,eAAe,CAAC","sourcesContent":["import { FieldPacket, ResultSetHeader } from 'mysql2';\r\nimport pool from '../../database';\r\nimport { IWaterMeterSQL, IWaterMeter } from '../interfaces/waterMetersInterfaces';\r\n\r\n\r\nconst getAllWaterMeters =async () => {\r\n    const [wm] = await pool.query('SELECT * FROM WaterMeters;');\r\n    return wm;\r\n}\r\n\r\nconst getWaterMeterById = async(id: number) => {\r\n    const [wm]: [IWaterMeterSQL[], FieldPacket[]] = await pool.query(`SELECT id, number, checkingDate, sealNumber, wmAddressID, wmTypeID, creationTime FROM Watermeters WHERE id=?;`, [id]);\r\n    return wm[0];\r\n};\r\n\r\nconst createWaterMeter = async (waterMeter: IWaterMeter): Promise<number> => {\r\n    const newWaterMeter = {\r\n        serialNumber: waterMeter.serialNumber,\r\n        checkingDate: waterMeter.checkingDate,\r\n        sealNumber: waterMeter.sealNumber,\r\n        wmTypeID: 1,\r\n        wmAddressId: null\r\n    };\r\n    \r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query('INSERT INTO WaterMeters SET ?;', [newWaterMeter]);\r\n\r\n    return result.insertId;\r\n}\r\n\r\n\r\nconst deleteWaterMeter = async (id: number): Promise<boolean> => {\r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query(`UPDATE WaterMeters SET deletedDate=? WHERE id=?;`, [new Date(), id]);\r\n    if (result.affectedRows < 1) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nconst addressServices = {\r\n    getAllWaterMeters,\r\n    getWaterMeterById,\r\n    createWaterMeter,\r\n    deleteWaterMeter,\r\n}\r\n\r\nexport default addressServices;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d988508afab53f2460f4be60c652454a8a71e7b0","contentHash":"696976a70a5e4a786383d1a999b83efb96dec701999095c267d1542538dafdcb"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\middleware\\waterMetersMiddlewares.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\middleware\\waterMetersMiddlewares.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":31},"end":{"line":15,"column":1}},"2":{"start":{"line":5,"column":65},"end":{"line":5,"column":73}},"3":{"start":{"line":6,"column":8},"end":{"line":11,"column":9}},"4":{"start":{"line":7,"column":12},"end":{"line":10,"column":15}},"5":{"start":{"line":13,"column":8},"end":{"line":13,"column":15}},"6":{"start":{"line":16,"column":0},"end":{"line":16,"column":41}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":31},"end":{"line":4,"column":32}},"loc":{"start":{"line":4,"column":51},"end":{"line":14,"column":5}},"line":4}},"branchMap":{"0":{"loc":{"start":{"line":6,"column":8},"end":{"line":11,"column":9}},"type":"if","locations":[{"start":{"line":6,"column":8},"end":{"line":11,"column":9}},{"start":{"line":6,"column":8},"end":{"line":11,"column":9}}],"line":6},"1":{"loc":{"start":{"line":6,"column":12},"end":{"line":6,"column":66}},"type":"binary-expr","locations":[{"start":{"line":6,"column":12},"end":{"line":6,"column":25}},{"start":{"line":6,"column":29},"end":{"line":6,"column":42}},{"start":{"line":6,"column":46},"end":{"line":6,"column":57}},{"start":{"line":6,"column":61},"end":{"line":6,"column":66}}],"line":6}},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":1},"f":{"0":0},"b":{"0":[0,0],"1":[0,0,0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/middleware/waterMetersMiddlewares.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/middleware/waterMetersMiddlewares.ts"],"names":[],"mappings":";;AAEA,MAAM,sBAAsB,GAAG;IAC3B,yBAAyB,EAAE,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;QAC3E,MAAM,EAAE,YAAY,EAAE,YAAY,EAAE,UAAU,EAAE,IAAI,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;QAClE,IAAI,CAAC,YAAY,IAAI,CAAC,YAAY,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,EAAE;YACxD,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;gBACxB,OAAO,EAAE,KAAK;gBACd,OAAO,EAAE,sEAAsE;aAClF,CAAC,CAAC;SACN;QAAA,CAAC;QACF,IAAI,EAAE,CAAC;IACX,CAAC;CACJ,CAAC;AAEF,kBAAe,sBAAsB,CAAC","sourcesContent":["import { Request, Response, NextFunction } from \"express\";\r\n\r\nconst waterMetersMiddlewares = {\r\n    checkCreateWaterMeterData: (req: Request, res: Response, next: NextFunction) => {\r\n        const { serialNumber, checkingDate, sealNumber, type } = req.body;\r\n        if (!serialNumber || !checkingDate || !sealNumber || !type) {\r\n            return res.status(400).json({\r\n                success: false,\r\n                message: `Some data is missing (serialNumber, checkingDate, sealNumber, type )`,\r\n            });\r\n        };\r\n        next();\r\n    }\r\n};\r\n\r\nexport default waterMetersMiddlewares;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ef1ca8bce6d9fb7d71b7c66b51c06d2f2c93ca2a","contentHash":"9cb4ee60687aa097c22d113e41e0daf7cb5feeceea55b932e92d4a75b3e340d9"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\routes\\waterUsageRoutes.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\routes\\waterUsageRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":31},"end":{"line":7,"column":105}},"5":{"start":{"line":8,"column":32},"end":{"line":8,"column":95}},"6":{"start":{"line":9,"column":25},"end":{"line":9,"column":51}},"7":{"start":{"line":10,"column":0},"end":{"line":13,"column":129}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":35}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{"0":3},"b":{"0":[1,1,1],"1":[2,1],"2":[3,3]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/routes/waterUsageRoutes.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/routes/waterUsageRoutes.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,0GAAkF;AAClF,gGAAwE;AAExE,MAAM,gBAAgB,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAE1C,gBAAgB;KACX,GAAG,CAAC,GAAG,EAAE,8BAAoB,CAAC,iBAAiB,CAAC;KAChD,GAAG,CAAC,MAAM,EAAE,8BAAoB,CAAC,2BAA2B,CAAC;KAC7D,IAAI,CAAC,MAAM,EAAE,+BAAqB,CAAC,yBAAyB,EAAE,8BAAoB,CAAC,mBAAmB,CAAC,CAAA;AAE5G,kBAAe,gBAAgB,CAAC","sourcesContent":["import express from 'express';\r\nimport waterUsageController from '../components/controllers/waterUsageController';\r\nimport waterUsageMiddlewares from '../middleware/waterUsageMiddlewares';\r\n\r\nconst waterUsageRoutes = express.Router();\r\n\r\nwaterUsageRoutes\r\n    .get(\"/\", waterUsageController.getAllWaterUsages)\r\n    .get(\"/:id\", waterUsageController.getWaterUsageByWaterMeterId)\r\n    .post(\"/:id\", waterUsageMiddlewares.checkCreateWaterUsageData, waterUsageController.createNewWaterUsage)\r\n\r\nexport default waterUsageRoutes;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3d27c4191a2437d510a77cdec835a922b781ed4d","contentHash":"a5b4a216a4fedb75f3b2c885b33497aa1dbfc869be37327e0035704b7b6628ea"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\controllers\\waterUsageController.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\controllers\\waterUsageController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":29},"end":{"line":15,"column":87}},"16":{"start":{"line":16,"column":26},"end":{"line":29,"column":2}},"17":{"start":{"line":16,"column":46},"end":{"line":29,"column":2}},"18":{"start":{"line":17,"column":4},"end":{"line":28,"column":5}},"19":{"start":{"line":19,"column":8},"end":{"line":19,"column":77}},"20":{"start":{"line":20,"column":8},"end":{"line":24,"column":11}},"21":{"start":{"line":27,"column":8},"end":{"line":27,"column":20}},"22":{"start":{"line":30,"column":36},"end":{"line":45,"column":2}},"23":{"start":{"line":30,"column":56},"end":{"line":45,"column":2}},"24":{"start":{"line":31,"column":4},"end":{"line":44,"column":5}},"25":{"start":{"line":32,"column":19},"end":{"line":32,"column":42}},"26":{"start":{"line":33,"column":27},"end":{"line":33,"column":87}},"27":{"start":{"line":34,"column":8},"end":{"line":35,"column":58}},"28":{"start":{"line":35,"column":12},"end":{"line":35,"column":58}},"29":{"start":{"line":36,"column":8},"end":{"line":40,"column":11}},"30":{"start":{"line":43,"column":8},"end":{"line":43,"column":20}},"31":{"start":{"line":46,"column":28},"end":{"line":65,"column":2}},"32":{"start":{"line":46,"column":48},"end":{"line":65,"column":2}},"33":{"start":{"line":47,"column":4},"end":{"line":64,"column":5}},"34":{"start":{"line":48,"column":58},"end":{"line":48,"column":66}},"35":{"start":{"line":49,"column":30},"end":{"line":53,"column":9}},"36":{"start":{"line":54,"column":19},"end":{"line":54,"column":79}},"37":{"start":{"line":55,"column":8},"end":{"line":56,"column":71}},"38":{"start":{"line":56,"column":12},"end":{"line":56,"column":71}},"39":{"start":{"line":57,"column":8},"end":{"line":60,"column":11}},"40":{"start":{"line":63,"column":8},"end":{"line":63,"column":20}},"41":{"start":{"line":66,"column":30},"end":{"line":70,"column":1}},"42":{"start":{"line":71,"column":0},"end":{"line":71,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":16,"column":26},"end":{"line":16,"column":27}},"loc":{"start":{"line":16,"column":46},"end":{"line":29,"column":2}},"line":16},"9":{"name":"(anonymous_9)","decl":{"start":{"line":16,"column":80},"end":{"line":16,"column":81}},"loc":{"start":{"line":16,"column":93},"end":{"line":29,"column":1}},"line":16},"10":{"name":"(anonymous_10)","decl":{"start":{"line":30,"column":36},"end":{"line":30,"column":37}},"loc":{"start":{"line":30,"column":56},"end":{"line":45,"column":2}},"line":30},"11":{"name":"(anonymous_11)","decl":{"start":{"line":30,"column":90},"end":{"line":30,"column":91}},"loc":{"start":{"line":30,"column":103},"end":{"line":45,"column":1}},"line":30},"12":{"name":"(anonymous_12)","decl":{"start":{"line":46,"column":28},"end":{"line":46,"column":29}},"loc":{"start":{"line":46,"column":48},"end":{"line":65,"column":2}},"line":46},"13":{"name":"(anonymous_13)","decl":{"start":{"line":46,"column":82},"end":{"line":46,"column":83}},"loc":{"start":{"line":46,"column":95},"end":{"line":65,"column":1}},"line":46}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":34,"column":8},"end":{"line":35,"column":58}},"type":"if","locations":[{"start":{"line":34,"column":8},"end":{"line":35,"column":58}},{"start":{"line":34,"column":8},"end":{"line":35,"column":58}}],"line":34},"9":{"loc":{"start":{"line":55,"column":8},"end":{"line":56,"column":71}},"type":"if","locations":[{"start":{"line":55,"column":8},"end":{"line":56,"column":71}},{"start":{"line":55,"column":8},"end":{"line":56,"column":71}}],"line":55}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1,"42":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,0],"9":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/controllers/waterUsageController.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/controllers/waterUsageController.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,wFAAgE;AAEhE,MAAM,iBAAiB,GAAG,CAAM,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IAC/E,IAAI;QACA,IAAI,WAAW,CAAC;QAChB,WAAW,GAAG,MAAM,4BAAkB,CAAC,iBAAiB,EAAE,CAAC;QAE3D,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACjB,OAAO,EAAE,IAAI;YACb,OAAO,EAAE,sBAAsB;YAC/B,WAAW;SACd,CAAC,CAAC;KACN;IAAC,OAAO,KAAK,EAAE;QACZ,IAAI,CAAC,KAAK,CAAC,CAAC;KACf;AAEL,CAAC,CAAA,CAAA;AAED,MAAM,2BAA2B,GAAG,CAAO,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IAC1F,IAAI;QACA,MAAM,EAAE,GAAG,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QACnC,MAAM,UAAU,GAAG,4BAAkB,CAAC,2BAA2B,CAAC,EAAE,CAAC,CAAC;QACtE,IAAI,CAAC,UAAU;YAAE,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;QAE/D,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACxB,OAAO,EAAE,IAAI;YACb,OAAO,EAAE,kBAAkB;YAC3B,UAAU;SACb,CAAC,CAAC;KACN;IAAC,OAAO,KAAK,EAAE;QACZ,IAAI,CAAC,KAAK,CAAC,CAAC;KACf;AACL,CAAC,CAAA,CAAC;AAEF,MAAM,mBAAmB,GAAG,CAAO,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IAClF,IAAI;QACA,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,eAAe,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;QAC3D,MAAM,aAAa,GAAG;YAClB,MAAM;YACN,YAAY;YACZ,eAAe;SAClB,CAAA;QACD,MAAM,EAAE,GAAG,4BAAkB,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC;QAC9D,IAAI,CAAC,EAAE;YAAE,MAAM,IAAI,KAAK,CAAC,yCAAyC,CAAC,CAAC;QAEpE,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACxB,OAAO,EAAE,IAAI;YACb,OAAO,EAAE,2BAA2B,MAAM,UAAU;SACvD,CAAC,CAAC;KACN;IAAC,OAAO,KAAK,EAAE;QACZ,IAAI,CAAC,KAAK,CAAC,CAAC;KACf;AACL,CAAC,CAAA,CAAC;AAIF,MAAM,qBAAqB,GAAG;IAC1B,iBAAiB;IACjB,2BAA2B;IAC3B,mBAAmB;CACtB,CAAA;AAGD,kBAAe,qBAAqB,CAAC","sourcesContent":["import { NextFunction, Request, Response } from 'express';\r\nimport waterUsageServices from '../services/waterUsageServices';\r\n\r\nconst getAllWaterUsages = async(req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n        let waterusages;\r\n        waterusages = await waterUsageServices.getAllWaterUsages();\r\n\r\n        res.status(200).json({\r\n            success: true,\r\n            message: 'List of water usages',\r\n            waterusages,\r\n        });\r\n    } catch (error) {\r\n        next(error);\r\n    }\r\n   \r\n}\r\n\r\nconst getWaterUsageByWaterMeterId = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n        const id = parseInt(req.params.id);\r\n        const waterusage = waterUsageServices.getWaterUsageByWaterMeterId(id);\r\n        if (!waterusage) throw new Error('Watermeter usage not found');\r\n        \r\n        return res.status(200).json({\r\n            success: true,\r\n            message: `Watermeter usage`,\r\n            waterusage,\r\n        });\r\n    } catch (error) {\r\n        next(error);\r\n    }   \r\n};\r\n\r\nconst createNewWaterUsage = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n        const { amount, waterMeterID, consumptionTime } = req.body;\r\n        const newWaterUsage = {\r\n            amount,\r\n            waterMeterID,\r\n            consumptionTime,\r\n        }\r\n        const id = waterUsageServices.createWaterUsage(newWaterUsage);\r\n        if (!id) throw new Error('Error, did manage to create water usage');\r\n\r\n        return res.status(201).json({\r\n            success: true,\r\n            message: `Water usage with amount ${amount} created`,\r\n        });\r\n    } catch (error) {\r\n        next(error);\r\n    }   \r\n};\r\n\r\n\r\n\r\nconst waterUsageControllers = {\r\n    getAllWaterUsages,\r\n    getWaterUsageByWaterMeterId,\r\n    createNewWaterUsage,\r\n}\r\n\r\n\r\nexport default waterUsageControllers;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"257aec089a932f42a98186c983009162c5d5db6f","contentHash":"57cdacacd82e1427dcde1acaeb9a3ae4e93ab84e628013c311436853a8204e6f"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\services\\waterUsageServices.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\services\\waterUsageServices.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":19},"end":{"line":15,"column":61}},"16":{"start":{"line":16,"column":26},"end":{"line":19,"column":2}},"17":{"start":{"line":16,"column":32},"end":{"line":19,"column":2}},"18":{"start":{"line":17,"column":17},"end":{"line":17,"column":76}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":14}},"20":{"start":{"line":20,"column":36},"end":{"line":23,"column":2}},"21":{"start":{"line":20,"column":44},"end":{"line":23,"column":2}},"22":{"start":{"line":21,"column":17},"end":{"line":21,"column":129}},"23":{"start":{"line":22,"column":4},"end":{"line":22,"column":17}},"24":{"start":{"line":24,"column":25},"end":{"line":32,"column":2}},"25":{"start":{"line":24,"column":41},"end":{"line":32,"column":2}},"26":{"start":{"line":25,"column":26},"end":{"line":29,"column":5}},"27":{"start":{"line":30,"column":21},"end":{"line":30,"column":101}},"28":{"start":{"line":31,"column":4},"end":{"line":31,"column":27}},"29":{"start":{"line":33,"column":24},"end":{"line":37,"column":1}},"30":{"start":{"line":38,"column":0},"end":{"line":38,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":16,"column":26},"end":{"line":16,"column":27}},"loc":{"start":{"line":16,"column":32},"end":{"line":19,"column":2}},"line":16},"9":{"name":"(anonymous_9)","decl":{"start":{"line":16,"column":66},"end":{"line":16,"column":67}},"loc":{"start":{"line":16,"column":79},"end":{"line":19,"column":1}},"line":16},"10":{"name":"(anonymous_10)","decl":{"start":{"line":20,"column":36},"end":{"line":20,"column":37}},"loc":{"start":{"line":20,"column":44},"end":{"line":23,"column":2}},"line":20},"11":{"name":"(anonymous_11)","decl":{"start":{"line":20,"column":78},"end":{"line":20,"column":79}},"loc":{"start":{"line":20,"column":91},"end":{"line":23,"column":1}},"line":20},"12":{"name":"(anonymous_12)","decl":{"start":{"line":24,"column":25},"end":{"line":24,"column":26}},"loc":{"start":{"line":24,"column":41},"end":{"line":32,"column":2}},"line":24},"13":{"name":"(anonymous_13)","decl":{"start":{"line":24,"column":75},"end":{"line":24,"column":76}},"loc":{"start":{"line":24,"column":88},"end":{"line":32,"column":1}},"line":24}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":1,"30":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/services/waterUsageServices.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/services/waterUsageServices.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,8DAAkC;AAIlC,MAAM,iBAAiB,GAAG,GAAS,EAAE;IACjC,MAAM,CAAC,EAAE,CAAC,GAAG,MAAM,kBAAI,CAAC,KAAK,CAAC,2BAA2B,CAAC,CAAC;IAC3D,OAAO,EAAE,CAAC;AACd,CAAC,CAAA,CAAA;AAED,MAAM,2BAA2B,GAAG,CAAM,EAAU,EAAE,EAAE;IACpD,MAAM,CAAC,EAAE,CAAC,GAAsC,MAAM,kBAAI,CAAC,KAAK,CAAC,0EAA0E,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IACnJ,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;AACjB,CAAC,CAAA,CAAC;AAEF,MAAM,gBAAgB,GAAG,CAAO,UAAuB,EAAmB,EAAE;IACxE,MAAM,aAAa,GAAG;QAClB,MAAM,EAAE,UAAU,CAAC,MAAM;QACzB,YAAY,EAAE,UAAU,CAAC,YAAY;QACrC,eAAe,EAAE,UAAU,CAAC,eAAe;KAC9C,CAAC;IAEF,MAAM,CAAC,MAAM,CAAC,GAAqC,MAAM,kBAAI,CAAC,KAAK,CAAC,+BAA+B,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;IAEtH,OAAO,MAAM,CAAC,QAAQ,CAAC;AAC3B,CAAC,CAAA,CAAA;AAGD,MAAM,eAAe,GAAG;IACpB,iBAAiB;IACjB,2BAA2B;IAC3B,gBAAgB;CACnB,CAAA;AAED,kBAAe,eAAe,CAAC","sourcesContent":["import { FieldPacket, ResultSetHeader } from 'mysql2';\r\nimport pool from '../../database';\r\nimport { IWaterUsage, IWaterUsageSQL } from '../interfaces/waterUsageInterfaces';\r\n\r\n\r\nconst getAllWaterUsages = async () => {\r\n    const [wu] = await pool.query('SELECT * FROM WaterUsage;');\r\n    return wu;\r\n}\r\n\r\nconst getWaterUsageByWaterMeterId = async(id: number) => {\r\n    const [wm]: [IWaterUsageSQL[], FieldPacket[]] = await pool.query(`SELECT id, amount, consumptionTime FROM WaterUsage WHERE waterMeterID=?;`, [id]);\r\n    return wm[0];\r\n};\r\n\r\nconst createWaterUsage = async (waterUsage: IWaterUsage): Promise<number> => {\r\n    const newWaterUsage = {\r\n        amount: waterUsage.amount,\r\n        waterMeterID: waterUsage.waterMeterID,\r\n        consumptionTime: waterUsage.consumptionTime\r\n    };\r\n    \r\n    const [result]: [ResultSetHeader, FieldPacket[]] = await pool.query('INSERT INTO WaterUsage SET ?;', [newWaterUsage]);\r\n\r\n    return result.insertId;\r\n}\r\n\r\n\r\nconst addressServices = {\r\n    getAllWaterUsages,\r\n    getWaterUsageByWaterMeterId,\r\n    createWaterUsage,\r\n}\r\n\r\nexport default addressServices;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"063de602d66aa646f2a43c36a21b62f92a0c54b5","contentHash":"e19a11cea80d3345b0da56c966fb5bdd110de966f18c13c78537bff3d9b7bd50"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\middleware\\waterUsageMiddlewares.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\middleware\\waterUsageMiddlewares.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":30},"end":{"line":15,"column":1}},"2":{"start":{"line":5,"column":58},"end":{"line":5,"column":66}},"3":{"start":{"line":6,"column":8},"end":{"line":11,"column":9}},"4":{"start":{"line":7,"column":12},"end":{"line":10,"column":15}},"5":{"start":{"line":13,"column":8},"end":{"line":13,"column":15}},"6":{"start":{"line":16,"column":0},"end":{"line":16,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":31},"end":{"line":4,"column":32}},"loc":{"start":{"line":4,"column":51},"end":{"line":14,"column":5}},"line":4}},"branchMap":{"0":{"loc":{"start":{"line":6,"column":8},"end":{"line":11,"column":9}},"type":"if","locations":[{"start":{"line":6,"column":8},"end":{"line":11,"column":9}},{"start":{"line":6,"column":8},"end":{"line":11,"column":9}}],"line":6},"1":{"loc":{"start":{"line":6,"column":12},"end":{"line":6,"column":56}},"type":"binary-expr","locations":[{"start":{"line":6,"column":12},"end":{"line":6,"column":19}},{"start":{"line":6,"column":23},"end":{"line":6,"column":39}},{"start":{"line":6,"column":43},"end":{"line":6,"column":56}}],"line":6}},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":1},"f":{"0":0},"b":{"0":[0,0],"1":[0,0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/middleware/waterUsageMiddlewares.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/middleware/waterUsageMiddlewares.ts"],"names":[],"mappings":";;AAEA,MAAM,qBAAqB,GAAG;IAC1B,yBAAyB,EAAE,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;QAC3E,MAAM,EAAE,MAAM,EAAE,eAAe,EAAE,YAAY,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;QAC3D,IAAI,CAAC,MAAM,IAAI,CAAC,eAAe,IAAI,CAAC,YAAY,EAAE;YAC9C,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;gBACxB,OAAO,EAAE,KAAK;gBACd,OAAO,EAAE,+DAA+D;aAC3E,CAAC,CAAC;SACN;QAAA,CAAC;QACF,IAAI,EAAE,CAAC;IACX,CAAC;CACJ,CAAC;AAEF,kBAAe,qBAAqB,CAAC","sourcesContent":["import { Request, Response, NextFunction } from \"express\";\r\n\r\nconst waterUsageMiddlewares = {\r\n    checkCreateWaterUsageData: (req: Request, res: Response, next: NextFunction) => {\r\n        const { amount, consumptionTime, waterMeterID } = req.body;\r\n        if (!amount || !consumptionTime || !waterMeterID) {\r\n            return res.status(400).json({\r\n                success: false,\r\n                message: `Some data is missing (amount, consumptionTime, waterMeterID )`,\r\n            });\r\n        };\r\n        next();\r\n    }\r\n};\r\n\r\nexport default waterUsageMiddlewares;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8eafdb1e6f1a95c9c2245a0799437e39e9354acc","contentHash":"b018fb15a0a624b0870d00167417d1ae38d866cfaafcb921c931e576cb5932ab"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\controllers\\authContoller.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\components\\controllers\\authContoller.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":23},"end":{"line":15,"column":75}},"16":{"start":{"line":16,"column":23},"end":{"line":16,"column":75}},"17":{"start":{"line":17,"column":14},"end":{"line":45,"column":2}},"18":{"start":{"line":17,"column":28},"end":{"line":45,"column":2}},"19":{"start":{"line":18,"column":32},"end":{"line":18,"column":40}},"20":{"start":{"line":19,"column":4},"end":{"line":24,"column":5}},"21":{"start":{"line":20,"column":8},"end":{"line":23,"column":11}},"22":{"start":{"line":25,"column":17},"end":{"line":25,"column":67}},"23":{"start":{"line":26,"column":4},"end":{"line":31,"column":5}},"24":{"start":{"line":27,"column":8},"end":{"line":30,"column":11}},"25":{"start":{"line":32,"column":18},"end":{"line":32,"column":79}},"26":{"start":{"line":33,"column":4},"end":{"line":38,"column":5}},"27":{"start":{"line":34,"column":8},"end":{"line":37,"column":11}},"28":{"start":{"line":39,"column":18},"end":{"line":39,"column":57}},"29":{"start":{"line":40,"column":4},"end":{"line":44,"column":7}},"30":{"start":{"line":46,"column":23},"end":{"line":48,"column":1}},"31":{"start":{"line":49,"column":0},"end":{"line":49,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":14},"end":{"line":17,"column":15}},"loc":{"start":{"line":17,"column":28},"end":{"line":45,"column":2}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":62},"end":{"line":17,"column":63}},"loc":{"start":{"line":17,"column":75},"end":{"line":45,"column":1}},"line":17}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":19,"column":4},"end":{"line":24,"column":5}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":24,"column":5}},{"start":{"line":19,"column":4},"end":{"line":24,"column":5}}],"line":19},"9":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":27}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":14}},{"start":{"line":19,"column":18},"end":{"line":19,"column":27}}],"line":19},"10":{"loc":{"start":{"line":26,"column":4},"end":{"line":31,"column":5}},"type":"if","locations":[{"start":{"line":26,"column":4},"end":{"line":31,"column":5}},{"start":{"line":26,"column":4},"end":{"line":31,"column":5}}],"line":26},"11":{"loc":{"start":{"line":33,"column":4},"end":{"line":38,"column":5}},"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":38,"column":5}},{"start":{"line":33,"column":4},"end":{"line":38,"column":5}}],"line":33}},"s":{"0":1,"1":3,"2":0,"3":4,"4":0,"5":0,"6":0,"7":3,"8":3,"9":3,"10":4,"11":4,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":4,"19":4,"20":4,"21":1,"22":3,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1,"31":1},"f":{"0":4,"1":3,"2":0,"3":4,"4":0,"5":3,"6":4,"7":2,"8":4,"9":4},"b":{"0":[1,1,1],"1":[3,0],"2":[4,4],"3":[1,3],"4":[4,4],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[1,3],"9":[4,3],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/controllers/authContoller.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/components/controllers/authContoller.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,4EAAoD;AACpD,4EAAoD;AAIpD,MAAM,KAAK,GAAI,CAAO,GAAY,EAAE,GAAa,EAAE,EAAE;IACjD,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;IACrC,IAAI,CAAC,KAAK,IAAI,CAAC,QAAQ,EAAE;QACrB,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YAC5B,OAAO,EAAE,KAAK;YACd,OAAO,EAAE,wCAAwC;SAChD,CAAC,CAAC;KACN;IACD,MAAM,IAAI,GAAG,MAAM,sBAAY,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;IACtD,IAAI,CAAC,IAAI,EAAE;QACP,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YAC5B,OAAO,EAAE,KAAK;YACd,OAAO,EAAE,gBAAgB;SACxB,CAAC,CAAC;KACN;IACD,MAAM,KAAK,GAAG,MAAM,sBAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;IAClE,IAAI,CAAC,KAAK,EAAE;QACR,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YAC5B,OAAO,EAAE,KAAK;YACd,OAAO,EAAE,gBAAgB;SACxB,CAAC,CAAC;KACN;IACD,MAAM,KAAK,GAAG,MAAM,sBAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC5C,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;QACxB,OAAO,EAAE,IAAI;QACb,OAAO,EAAE,OAAO;QAChB,KAAK;KACR,CAAC,CAAC;AACP,CAAC,CAAA,CAAA;AAED,MAAM,cAAc,GAAG;IACnB,KAAK;CACR,CAAC;AAEF,kBAAe,cAAc,CAAC","sourcesContent":["import { Request, Response } from \"express\";\r\nimport authServices from \"../services/authServices\";\r\nimport userServices from \"../services/userServices\";\r\n\r\n\r\n\r\nconst login =  async (req: Request, res: Response) => {\r\n    const { email, password } = req.body;\r\n    if (!email || !password) {\r\n        return res.status(400).json({\r\n        success: false,\r\n        message: 'Some data is missing (email, password)',\r\n        });\r\n    }\r\n    const user = await userServices.getUserByEmail(email);\r\n    if (!user) {\r\n        return res.status(404).json({\r\n        success: false,\r\n        message: 'User not found',\r\n        });\r\n    }\r\n    const match = await authServices.compare(password, user.password);\r\n    if (!match) {\r\n        return res.status(401).json({\r\n        success: false,\r\n        message: 'Wrong password',\r\n        });\r\n    }\r\n    const token = await authServices.sign(user);\r\n    return res.status(200).json({\r\n        success: true,\r\n        message: 'token',\r\n        token,\r\n    });\r\n}\r\n  \r\nconst authController = {\r\n    login\r\n};\r\n\r\nexport default authController;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e061d63886e0e5cf3a177142c69b2f2fbe9de08e","contentHash":"c9076a1c5c3c878ccbac1b90d214f718df15d3b514bf740b0b0bb552d604f1f2"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\middleware\\authMiddleWare.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\middleware\\authMiddleWare.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":23},"end":{"line":15,"column":86}},"16":{"start":{"line":16,"column":19},"end":{"line":36,"column":2}},"17":{"start":{"line":16,"column":39},"end":{"line":36,"column":2}},"18":{"start":{"line":18,"column":18},"end":{"line":18,"column":104}},"19":{"start":{"line":19,"column":4},"end":{"line":24,"column":5}},"20":{"start":{"line":20,"column":8},"end":{"line":23,"column":11}},"21":{"start":{"line":25,"column":4},"end":{"line":34,"column":5}},"22":{"start":{"line":26,"column":24},"end":{"line":26,"column":66}},"23":{"start":{"line":27,"column":8},"end":{"line":27,"column":34}},"24":{"start":{"line":30,"column":8},"end":{"line":33,"column":11}},"25":{"start":{"line":35,"column":4},"end":{"line":35,"column":18}},"26":{"start":{"line":37,"column":16},"end":{"line":45,"column":2}},"27":{"start":{"line":37,"column":36},"end":{"line":45,"column":2}},"28":{"start":{"line":38,"column":4},"end":{"line":43,"column":5}},"29":{"start":{"line":39,"column":8},"end":{"line":42,"column":11}},"30":{"start":{"line":44,"column":4},"end":{"line":44,"column":18}},"31":{"start":{"line":46,"column":23},"end":{"line":49,"column":1}},"32":{"start":{"line":50,"column":0},"end":{"line":50,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":16,"column":19},"end":{"line":16,"column":20}},"loc":{"start":{"line":16,"column":39},"end":{"line":36,"column":2}},"line":16},"9":{"name":"(anonymous_9)","decl":{"start":{"line":16,"column":73},"end":{"line":16,"column":74}},"loc":{"start":{"line":16,"column":86},"end":{"line":36,"column":1}},"line":16},"10":{"name":"(anonymous_10)","decl":{"start":{"line":37,"column":16},"end":{"line":37,"column":17}},"loc":{"start":{"line":37,"column":36},"end":{"line":45,"column":2}},"line":37},"11":{"name":"(anonymous_11)","decl":{"start":{"line":37,"column":70},"end":{"line":37,"column":71}},"loc":{"start":{"line":37,"column":83},"end":{"line":45,"column":1}},"line":37}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":18,"column":18},"end":{"line":18,"column":104}},"type":"cond-expr","locations":[{"start":{"line":18,"column":79},"end":{"line":18,"column":85}},{"start":{"line":18,"column":88},"end":{"line":18,"column":104}}],"line":18},"9":{"loc":{"start":{"line":18,"column":18},"end":{"line":18,"column":76}},"type":"binary-expr","locations":[{"start":{"line":18,"column":18},"end":{"line":18,"column":59}},{"start":{"line":18,"column":63},"end":{"line":18,"column":76}}],"line":18},"10":{"loc":{"start":{"line":19,"column":4},"end":{"line":24,"column":5}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":24,"column":5}},{"start":{"line":19,"column":4},"end":{"line":24,"column":5}}],"line":19},"11":{"loc":{"start":{"line":38,"column":4},"end":{"line":43,"column":5}},"type":"if","locations":[{"start":{"line":38,"column":4},"end":{"line":43,"column":5}},{"start":{"line":38,"column":4},"end":{"line":43,"column":5}}],"line":38}},"s":{"0":1,"1":0,"2":0,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":1,"32":1},"f":{"0":1,"1":0,"2":0,"3":1,"4":0,"5":0,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0},"b":{"0":[1,1,1],"1":[0,0],"2":[1,1],"3":[1,0],"4":[1,1],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[1,0],"9":[1,1],"10":[1,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/middleware/authMiddleWare.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/middleware/authMiddleWare.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,uFAA+D;AAG/D,MAAM,UAAU,GAAG,CAAO,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;;IACzE,MAAM,KAAK,GAAG,MAAA,GAAG,CAAC,OAAO,CAAC,aAAa,0CAAE,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;IACvD,IAAI,CAAC,KAAK,EAAE;QACR,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACxB,OAAO,EAAE,KAAK;YACd,OAAO,EAAE,iBAAiB;SAC7B,CAAC,CAAC;KACN;IACD,IAAI;QACA,MAAM,OAAO,GAAG,MAAM,sBAAY,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACjD,GAAG,CAAC,MAAM,CAAC,IAAI,GAAG,OAAO,CAAA;KAC5B;IAAC,OAAO,KAAK,EAAE;QACZ,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACxB,OAAO,EAAE,KAAK;YACd,OAAO,EAAE,oBAAoB;SAChC,CAAC,CAAA;KACL;IAED,OAAO,IAAI,EAAE,CAAC;AAClB,CAAC,CAAA,CAAA;AAED,MAAM,OAAO,GAAG,CAAO,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IACtE,IAAI,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE;QAClC,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACxB,OAAO,EAAE,KAAK;YACd,OAAO,EAAE,sBAAsB;SAClC,CAAC,CAAA;KACL;IACD,OAAO,IAAI,EAAE,CAAC;AAClB,CAAC,CAAA,CAAA;AAED,MAAM,cAAc,GAAG;IACnB,UAAU;IACV,OAAO;CACV,CAAC;AAEF,kBAAe,cAAc,CAAC","sourcesContent":["import { Request, Response, NextFunction } from \"express\";\r\nimport authServices from \"../components/services/authServices\";\r\n\r\n\r\nconst isLoggedIn = async (req: Request, res: Response, next: NextFunction) => {\r\n    const token = req.headers.authorization?.split(' ')[1];\r\n    if (!token) {\r\n        return res.status(401).json({\r\n            success: false,\r\n            message: `Token not found`\r\n        });\r\n    }\r\n    try {\r\n        const decoded = await authServices.verify(token);\r\n        res.locals.user = decoded\r\n    } catch (error) {\r\n        return res.status(401).json({\r\n            success: false,\r\n            message: `Token is not valid`\r\n        })\r\n    }\r\n    \r\n    return next();\r\n}\r\n\r\nconst isAdmin = async (req: Request, res: Response, next: NextFunction) => {\r\n    if (res.locals.user.role !== 'Admin') {\r\n        return res.status(401).json({\r\n            success: false,\r\n            message: `You have to be admin`\r\n        })\r\n    }\r\n    return next();\r\n}\r\n\r\nconst authMiddleware = {\r\n    isLoggedIn,\r\n    isAdmin\r\n};\r\n\r\nexport default authMiddleware;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c83d552e37d1d642c11c67880f55a1d682a75581","contentHash":"5f22aec41c44011bcfc07eabbc3bb45a9dbe82322596897e0a6354e70d057268"},"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\apiConfig.ts":{"path":"C:\\Users\\Riina\\KOOL TLU\\WaterMeterApp\\server\\src\\apiConfig.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":0},"end":{"line":25,"column":62}},"25":{"start":{"line":26,"column":15},"end":{"line":26,"column":46}},"26":{"start":{"line":27,"column":0},"end":{"line":27,"column":16}},"27":{"start":{"line":28,"column":15},"end":{"line":40,"column":1}},"28":{"start":{"line":41,"column":0},"end":{"line":41,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21}},"s":{"0":1,"1":2,"2":2,"3":2,"4":2,"5":2,"6":1,"7":2,"8":0,"9":0,"10":0,"11":1,"12":1,"13":0,"14":1,"15":1,"16":0,"17":1,"18":1,"19":1,"20":2,"21":2,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1},"f":{"0":2,"1":1,"2":0,"3":1,"4":0,"5":1},"b":{"0":[1,1,1],"1":[1,0],"2":[2,0],"3":[2,0],"4":[2,2],"5":[0,2],"6":[2,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[0,1],"12":[1,1],"13":[1,0],"14":[2,0],"15":[2,2]},"inputSourceMap":{"version":3,"file":"C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/apiConfig.ts","sources":["C:/Users/Riina/KOOL TLU/WaterMeterApp/server/src/apiConfig.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+CAAiC;AAEjC,MAAM,CAAC,MAAM,EAAE,CAAC;AAEhB,MAAM,MAAM,GAAG;IACX,IAAI,EAAE,IAAI;IACV,SAAS,EAAE,OAAO,CAAC,GAAG,CAAC,UAAU;IACjC,UAAU,EAAE,OAAO,CAAC,GAAG,CAAC,UAAU;IAClC,OAAO,EAAE,SAAS;IAClB,EAAE,EAAE;QACA,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,OAAO;QACzB,QAAQ,EAAE,OAAO,CAAC,GAAG,CAAC,WAAW;QACjC,OAAO,EAAE,OAAO,CAAC,GAAG,CAAC,QAAQ;QAC7B,IAAI,EAAE,WAAW;QACjB,IAAI,EAAE,IAAI,EAAE,OAAO;KACtB;CACJ,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["import * as dotenv from \"dotenv\";\r\n\r\ndotenv.config();\r\n\r\nconst config = {\r\n    port: 3050,\r\n    jwtSecret: process.env.JWT_SECRET,\r\n    saltRounds: process.env.SALTROUNDS,\r\n    apiPath: '/api/v1',\r\n    db: {\r\n        user: process.env.DB_USER,\r\n        password: process.env.DB_PASSWORD,\r\n        databas: process.env.DATABASE,\r\n        host: 'localhost',\r\n        port: 3306, //3306?\r\n    }\r\n};\r\n\r\nexport default config;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"bf9a4f5328265d067be8e901e1135456991365ca","contentHash":"91a455c252add5677f039ab671fb662d5de3e7c118ce9c6b9ba5b07ee8000cb5"}}